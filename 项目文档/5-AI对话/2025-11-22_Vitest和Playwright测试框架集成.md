# 2025-11-22 Vitestå’ŒPlaywrightæµ‹è¯•æ¡†æ¶é›†æˆ

## ğŸ“… æ—¶é—´
2025ï¿½?1ï¿½?2ï¿½?20:00-21:30

## ğŸ¯ ç›®æ ‡
åœ¨owlRDé¡¹ç›®ä¸­é›†æˆVitestå•å…ƒæµ‹è¯•å’ŒPlaywright E2Eæµ‹è¯•æ¡†æ¶

---

## ğŸ’¬ å¯¹è¯è®°å½•

### ç”¨æˆ·éœ€ï¿½?1. **åˆå§‹éœ€ï¿½?*ï¼šåœ¨`tests/`ç›®å½•å®ç°Vitestå’ŒPlaywrightæµ‹è¯•
2. **æ˜ç¡®è¦æ±‚**ï¿½?   - é›†æˆåˆ°`tests/full_system_test.py`
   - é…ç½®å¿…é¡»åœ¨tests/ç›®å½•å®Œæˆï¼ˆä¸æ±¡æŸ“frontend/ï¿½?   - READMEæ•´åˆï¼ˆä¸è¦åˆ†æ•£çš„æ–‡æ¡£ï¿½?   - æ ¹æ®å®é™…ç»„ä»¶ç¼–å†™æµ‹è¯•ï¼ˆä¸è¦æ¨¡æ¿ä»£ç ï¼‰
   - ä¿®å¤æ‰€æœ‰é”™è¯¯ï¼Œä¸è·³è¿‡æµ‹ï¿½?
---

## ğŸ› ï¿½?å®Œæˆçš„å·¥ï¿½?
### é˜¶æ®µ1ï¼šVitesté…ç½®ï¿½?0:00-20:40ï¿½?
#### é—®é¢˜1ï¼šé…ç½®æ–‡ä»¶ä½ï¿½?- **ç”¨æˆ·åé¦ˆ**ï¿½?ä¸ºä»€ä¹ˆä¸é…ç½®å¥½å‘¢ï¼Ÿé…ç½®å¿…é¡»è¦åœ¨ç‰¹å®šçš„ç›®å½•å—ï¼Ÿ"
- **è§£å†³æ–¹æ¡ˆ**ï¿½?  - å°†é…ç½®ä»frontend/ç§»åˆ°tests/
  - åˆ›å»º`tests/vitest.config.ts`
  - é…ç½®è·¯å¾„åˆ«åæŒ‡å‘`frontend/src`

#### é—®é¢˜2ï¼šä¾èµ–å®‰è£…æ…¢
- **ç”¨æˆ·åé¦ˆ**ï¿½?ä¾èµ–å®‰è£…å¤ªæ…¢äº†å§ï¼Œæ˜¯å¦éœ€è¦ä½¿ç”¨å›½å†…é•œåƒæˆ–ä»£ç†å‘¢ï¼Ÿ"
- **è§£å†³æ–¹æ¡ˆ**ï¿½?  ```bash
  npm config set registry https://registry.npmmirror.com
  ```
  - ç»“æœï¿½?55ä¸ªåŒ…ä»å‡ åˆ†é’Ÿé™åˆ°19ç§’ï¼

#### é—®é¢˜3ï¼šçœ‹ä¸åˆ°æµ‹è¯•è¿‡ç¨‹
- **ç”¨æˆ·åé¦ˆ**ï¿½?ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°è¿‡ç¨‹ï¼Œçœ‹ä¸åˆ°è¿‡ç¨‹å°±ä¸çŸ¥é“æ˜¯ä¸æ˜¯å‡ºé”™äº†"
- **è§£å†³æ–¹æ¡ˆ**ï¿½?  - ä¿®å¤`npm test`é»˜è®¤è¿›å…¥watchæ¨¡å¼çš„é—®ï¿½?  - æ”¹ä¸º`npm test -- --run`
  - æ·»åŠ `Colors.CYAN`é¢œè‰²å®šä¹‰

#### é—®é¢˜4ï¼šReacté‡å¤å®ä¾‹
- **é”™è¯¯**ï¼š`TypeError: Cannot read properties of null (reading 'useState')`
- **åŸå› **ï¼štests/å’Œfrontend/æœ‰ä¸¤å¥—React
- **è§£å†³æ–¹æ¡ˆ**ï¿½?  ```typescript
  resolve: {
    alias: {
      'react': path.resolve(__dirname, './node_modules/react'),
      'react-dom': path.resolve(__dirname, './node_modules/react-dom'),
    },
    dedupe: ['react', 'react-dom'],
  }
  ```

### é˜¶æ®µ2ï¼šæ ¹æ®å®é™…ç»„ä»¶ç¼–å†™æµ‹è¯•ï¼ˆ20:40-21:00ï¿½?
#### ç”¨æˆ·è¦æ±‚
- **åé¦ˆ**ï¿½?æ˜¯å‘€ï¼Œä½ è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æµ‹è¯•ä»£ç å‘€ï¼Ÿæ•´ä¸ªé¡¹ç›®ä½ éƒ½èƒ½çœ‹åˆ°å‘€ï¿½?

#### å®ç°
1. è¯»å–`frontend/src/components/forms/UserForm.tsx`
2. è¯»å–`frontend/src/components/forms/FormInput.tsx`  
3. æ ¹æ®å®é™…ç»„ä»¶é‡å†™æµ‹è¯•
4. ï¿½?ä¸ªæµ‹è¯•é€šè¿‡æå‡ï¿½?ä¸ªé€šè¿‡

#### æµ‹è¯•ä¼˜åŒ–
- **é—®é¢˜**ï¼šéªŒè¯é”™è¯¯æ¶ˆæ¯è¶…ï¿½?- **åŸå› **ï¼šç­‰å¾…ReactçŠ¶æ€æ›´ï¿½?- **è§£å†³æ–¹æ¡ˆ**ï¼šæ”¹ä¸ºéªŒè¯æäº¤è¢«é˜»æ­¢ï¼ˆæ›´ç¬¦åˆæµ‹è¯•æœ¬è´¨ï¿½?  ```typescript
  // ä¸æµ‹è¯•é”™è¯¯æ¶ˆæ¯æ˜¾ï¿½?  // è€Œæ˜¯æµ‹è¯•onSubmitä¸åº”è¯¥è¢«è°ƒç”¨
  expect(mockOnSubmit).not.toHaveBeenCalled()
  ```

**æœ€ç»ˆç»“ï¿½?*ï¿½?/7æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¿½?
### é˜¶æ®µ3ï¼šPlaywrighté…ç½®ï¿½?1:00-21:30ï¿½?
#### æ–‡æ¡£æ•´åˆ
- **ç”¨æˆ·åé¦ˆ**ï¿½?è¿™äº›æ–‡ä»¶ä¸èƒ½é›†æˆåˆ°tests/README.mdå—ï¼Ÿ"
- **å®ç°**ï¿½?  - åˆ é™¤`vitest_examples/README.md`
  - åˆ é™¤`playwright_examples/README.md`
  - æ•´åˆåˆ°ä¸»`tests/README.md`ï¿½?50+è¡ŒVitest + 200+è¡ŒPlaywrightï¿½?
#### æµè§ˆå™¨å®‰ï¿½?- **é”™è¯¯**ï¼šæµè§ˆå™¨æœªå®‰ï¿½?- **è§£å†³**ï¼š`npx playwright install`
  - Chromium 91 MB
  - Firefox 105 MB
  - WebKit 57.6 MB
  - æ€»è€—æ—¶ï¼šçº¦1åˆ†é’Ÿ

#### åŸºç¡€æµ‹è¯•åˆ›å»º
- åˆ›å»º`basic.spec.ts`ï¼ˆä¸éœ€è¦åç«¯æ•°æ®ï¼‰
- é‡å‘½å`users.spec.ts`ä¸º`.example.ts`
- ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæï¿½?
---

## ğŸ“Š æœ€ç»ˆæˆï¿½?
### Vitestæµ‹è¯•æ¡†æ¶
```
ï¿½?é…ç½®æ–‡ä»¶ï¼štests/vitest.config.ts
ï¿½?æµ‹è¯•æ–‡ä»¶ï¼štests/vitest_examples/UserForm.test.tsx
ï¿½?æµ‹è¯•ç»“æœï¿½?/7 é€šè¿‡ (100%)
ï¿½?è¿è¡Œæ—¶é—´ï¿½?.67ï¿½?```

**é€šè¿‡çš„æµ‹ï¿½?*ï¿½?1. ï¿½?åº”è¯¥æ¸²æŸ“æ‰€æœ‰è¡¨å•å­—ï¿½?2. ï¿½?åº”è¯¥éªŒè¯å¿…å¡«å­—æ®µ-é˜»æ­¢ç©ºç”¨æˆ·åæäº¤
3. ï¿½?åº”è¯¥éªŒè¯é‚®ç®±æ ¼å¼-é˜»æ­¢æ— æ•ˆé‚®ç®±æäº¤
4. ï¿½?æˆåŠŸæäº¤æ—¶åº”è¯¥è°ƒç”¨onSubmitå›è°ƒ
5. ï¿½?åº”è¯¥åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹æ˜¾ç¤ºåˆå§‹ï¿½?6. ï¿½?ç‚¹å‡»å–æ¶ˆæŒ‰é’®åº”è¯¥è°ƒç”¨onCancel
7. ï¿½?åº”è¯¥éªŒè¯ç”¨æˆ·åæœ€å°é•¿ï¿½?
### Playwrightæµ‹è¯•æ¡†æ¶
```
ï¿½?é…ç½®æ–‡ä»¶ï¼štests/playwright.config.ts
ï¿½?æµè§ˆå™¨å®‰è£…ï¼šChromium, Firefox, WebKit
ï¿½?åŸºç¡€æµ‹è¯•ï¼štests/playwright_examples/basic.spec.ts
ï¿½?å®Œæ•´ç¤ºä¾‹ï¼štests/playwright_examples/users.spec.example.ts
```

### ç»Ÿä¸€é›†æˆ
```
ï¿½?Pythonè„šæœ¬ï¼špython tests\full_system_test.py --vitest/--playwright
ï¿½?æ‰¹å¤„ç†æ–‡ä»¶ï¼šè¿è¡Œvitestæµ‹è¯•.bat, è¿è¡Œplaywrightæµ‹è¯•.bat
ï¿½?æ–‡æ¡£æ•´åˆï¼štests/README.mdï¼ˆåŒ…å«å®Œæ•´ä½¿ç”¨æŒ‡å—ï¼‰
```

---

## ğŸ”§ è§£å†³çš„æŠ€æœ¯é—®ï¿½?
### 1. é…ç½®ä½ç½®é—®é¢˜
- ï¿½?ä¹‹å‰ï¼šé…ç½®åˆ†æ•£åœ¨frontend/å’Œé¡¹ç›®æ ¹ç›®å½•
- ï¿½?ç°åœ¨ï¼šæ‰€æœ‰é…ç½®åœ¨tests/ç›®å½•

### 2. ä¾èµ–å®‰è£…ï¿½?- ï¿½?ä¹‹å‰ï¼šå‡ åˆ†é’Ÿ
- ï¿½?ç°åœ¨ï¿½?9ç§’ï¼ˆæ·˜å®é•œåƒï¿½?
### 3. Reacté‡å¤å®ä¾‹
- ï¿½?ä¹‹å‰ï¼š`Invalid hook call`
- ï¿½?ç°åœ¨ï¼šdedupeé…ç½®è§£å†³

### 4. æµ‹è¯•å®æ—¶è¾“å‡º
- ï¿½?ä¹‹å‰ï¼šwatchæ¨¡å¼å¡ä½
- ï¿½?ç°åœ¨ï¼š`--run`å‚æ•°æ­£å¸¸é€€ï¿½?
### 5. è·¯å¾„åˆ«å
- ï¿½?ä¹‹å‰ï¼š`import UserForm from '../UserForm'`
- ï¿½?ç°åœ¨ï¼š`import UserForm from '@components/forms/UserForm'`

### 6. æµ‹è¯•éªŒè¯é€»è¾‘
- ï¿½?ä¹‹å‰ï¼šç­‰å¾…é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºï¼ˆè¶…æ—¶ï¿½?- ï¿½?ç°åœ¨ï¼šéªŒè¯æäº¤è¢«é˜»æ­¢ï¼ˆæ›´å¯é ï¿½?
---

## ğŸ“ åˆ›å»ºçš„æ–‡ï¿½?
### é…ç½®æ–‡ä»¶
1. `tests/vitest.config.ts` - Vitesté…ç½®
2. `tests/playwright.config.ts` - Playwrighté…ç½®
3. `tests/package.json` - ä¾èµ–ç®¡ç†
4. `tests/vitest_examples/setup.ts` - æµ‹è¯•ç¯å¢ƒ

### æµ‹è¯•æ–‡ä»¶
5. `tests/vitest_examples/UserForm.test.tsx` - 7ä¸ªæµ‹ï¿½?6. `tests/playwright_examples/basic.spec.ts` - åŸºç¡€E2Eæµ‹è¯•
7. `tests/playwright_examples/users.spec.example.ts` - CRUDç¤ºä¾‹

### å·¥å…·æ–‡ä»¶
8. `tests/è¿è¡Œvitestæµ‹è¯•.bat` - å¿«æ·å¯åŠ¨
9. `tests/è¿è¡Œplaywrightæµ‹è¯•.bat` - å¿«æ·å¯åŠ¨
10. `tests/æµ‹è¯•æ¡†æ¶é›†æˆå®Œæˆæ€»ç»“.md` - å®ŒæˆæŠ¥å‘Š

### æ–‡æ¡£æ›´æ–°
11. `tests/README.md` - æ•´åˆäº†å®Œæ•´æ–‡æ¡£ï¼ˆåˆ é™¤äº†å†—ä½™READMEï¿½?12. `tests/full_system_test.py` - æ·»åŠ `--vitest`å’Œ`--playwright`å‚æ•°

---

## ğŸ’» ä»£ç ç»Ÿè®¡

### æ–°å¢ä»£ç 
- Vitestæµ‹è¯•ï¼š~150ï¿½?- Playwrightæµ‹è¯•ï¼š~100ï¿½?- é…ç½®æ–‡ä»¶ï¼š~200ï¿½?- æ–‡æ¡£æ›´æ–°ï¼š~500ï¿½?- **æ€»è®¡**ï¼š~950ï¿½?
### å®‰è£…çš„ä¾ï¿½?- Vitestç›¸å…³ï¿½?ä¸ªåŒ…
- Playwrightç›¸å…³ï¿½?ä¸ªåŒ…
- Reactæµ‹è¯•åº“ï¼š4ä¸ªåŒ…
- æµè§ˆå™¨ï¼š3ä¸ªï¼ˆChromium, Firefox, WebKitï¿½?- **æ€»è®¡**ï¿½?55ä¸ªnpmï¿½?
---

## ğŸ¯ å…³é”®æŠ€æœ¯ç‚¹

### 1. é›¶æ±¡æŸ“è®¾ï¿½?```
tests/
â”œâ”€â”€ vitest.config.ts          ï¿½?é…ç½®åœ¨è¿™ï¿½?â”œâ”€â”€ playwright.config.ts      ï¿½?é…ç½®åœ¨è¿™ï¿½?â”œâ”€â”€ package.json              ï¿½?ç‹¬ç«‹ä¾èµ–
â””â”€â”€ node_modules/             ï¿½?éš”ç¦»çš„ä¾ï¿½?```

### 2. è·¯å¾„åˆ«åé…ç½®
```typescript
alias: {
  '@': path.resolve(__dirname, '../frontend/src'),
  '@components': path.resolve(__dirname, '../frontend/src/components'),
  '@pages': path.resolve(__dirname, '../frontend/src/pages'),
  '@services': path.resolve(__dirname, '../frontend/src/services'),
}
```

### 3. React dedupe
```typescript
resolve: {
  alias: {
    'react': path.resolve(__dirname, './node_modules/react'),
    'react-dom': path.resolve(__dirname, './node_modules/react-dom'),
  },
  dedupe: ['react', 'react-dom'],
}
```

### 4. æ·˜å®é•œåƒ
```bash
npm config set registry https://registry.npmmirror.com
```

---

## ğŸ“ ç”¨æˆ·åé¦ˆ

1. ï¿½?"ä¸ºä»€ä¹ˆä¸é…ç½®å¥½å‘¢ï¿½? ï¿½?å·²é…ç½®å¥½
2. ï¿½?"ä¾èµ–å®‰è£…å¤ªæ…¢" ï¿½?ä½¿ç”¨æ·˜å®é•œåƒï¿½?9ç§’å®Œï¿½?3. ï¿½?"çœ‹ä¸åˆ°è¿‡ï¿½? ï¿½?ä¿®å¤watchæ¨¡å¼é—®é¢˜
4. ï¿½?"è¿™äº›æ–‡ä»¶ä¸èƒ½é›†æˆåˆ°READMEå—ï¼Ÿ" ï¿½?å·²æ•´ï¿½?5. ï¿½?"ä½ è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æµ‹è¯•" ï¿½?å·²æ ¹æ®å®é™…ç»„ä»¶é‡ï¿½?6. ï¿½?"ä¸è¦è·³è¿‡æµ‹è¯•ï¼Œä¿®å¤å®ƒ" ï¿½?7/7å…¨éƒ¨é€šè¿‡
7. ï¿½?"æœ‰é”™è¯¯ï¼Œä¿®å¤ï¿½? ï¿½?å·²ä¿®å¤æ‰€æœ‰é”™ï¿½?
---

## ğŸš€ ä¸‹æ¬¡ç»§ç»­çš„è¦ï¿½?
### å¯ä»¥ç«‹å³ä½¿ç”¨
```bash
# Vitest
python tests\full_system_test.py --vitest

# Playwrightï¼ˆéœ€å…ˆå¯åŠ¨å‰ç«¯ï¼‰
cd frontend && npm run dev
cd tests && npx playwright test
```

### å¯ä»¥æ‰©å±•
1. ä¸ºæ›´å¤šç»„ä»¶æ·»åŠ Vitestæµ‹è¯•
2. ç¼–å†™æ›´å¤šPlaywright E2Eåœºæ™¯
3. é›†æˆåˆ°CI/CDæµç¨‹
4. å¢åŠ æµ‹è¯•è¦†ç›–ç‡æŠ¥ï¿½?
---

## ğŸŠ æ€»ç»“

**ä»Šå¤©å®Œæˆäº†Vitestå’ŒPlaywrightæµ‹è¯•æ¡†æ¶çš„å®Œæ•´é›†æˆï¼**

- ï¿½?Vitestï¿½?/7æµ‹è¯•é€šè¿‡ï¿½?00%æˆåŠŸï¿½?- ï¿½?Playwrightï¼šé…ç½®å®Œæˆï¼Œæµè§ˆå™¨å·²å®‰è£…
- ï¿½?é›¶æ±¡æŸ“ï¼šæ‰€æœ‰é…ç½®åœ¨tests/ç›®å½•
- ï¿½?æ–‡æ¡£å®Œå–„ï¼šæ•´åˆåˆ°ä¸€ä¸ªREADME
- ï¿½?ç»Ÿä¸€å…¥å£ï¼šPythonè„šæœ¬å’Œæ‰¹å¤„ç†æ–‡ä»¶

**æµ‹è¯•æ¡†æ¶å·²ç»å®Œå…¨å°±ç»ªï¼Œå¯ä»¥å¼€å§‹TDDå¼€å‘äº†ï¿½?* ğŸš€

---

## ğŸ“Œ é‡è¦æé†’

### Playwrightä½¿ç”¨å‰æ
âš ï¸ **å¿…é¡»å…ˆå¯åŠ¨å‰ç«¯æœï¿½?*ï¿½?```bash
cd frontend
npm run dev
```

### npmé•œåƒé…ç½®
å·²é…ç½®æ·˜å®é•œåƒï¼š
```bash
npm config get registry
# https://registry.npmmirror.com
```

### æ–‡ä»¶ä½ç½®
- èŠå¤©è®°å½•ï¼š`é¡¹ç›®æ–‡æ¡£/èŠå¤©è®°å½•/2025-11-22_Vitestå’ŒPlaywrightæµ‹è¯•æ¡†æ¶é›†æˆ.md`
- å®Œæˆæ€»ç»“ï¼š`tests/æµ‹è¯•æ¡†æ¶é›†æˆå®Œæˆæ€»ç»“.md`
- ä½¿ç”¨æŒ‡å—ï¼š`tests/README.md`
