# 📋 规则系统同步说明

**版本**: v1.5.0  
**更新日期**: 2025-11-26  
**状态**: ✅ 已同步

---

## 🎯 规则系统定位

### 通用标准 vs 项目特定

本规则系统包含**两类内容**：

#### 1️⃣ 通用规则（所有项目共享）⭐

| 文件 | 内容 | 适用范围 |
|------|------|---------|
| `00-core-principles.md` | 5大核心原则 | 所有项目 |
| `01-file-operations.md` | 文件操作5步检查 | 所有项目 |
| `02-directory-management.md` | 目录管理规范 | 所有项目 |
| `03-naming-convention.md` | 命名规范 | 所有项目 |
| `04-git-workflow.md` | Git工作流 | 所有项目 |
| `05-change-synchronization.md` | 变更同步规则 | 所有项目 |
| `06-directory-architecture-template.md` | **目录架构模板** ⭐ | 所有项目 |
| `README.md` | 规则系统说明 | 所有项目 |
| `config.json` | 规则配置 | 所有项目 |
| `project-config.example.md` | 项目配置模板 | 所有项目 |

#### 2️⃣ 项目特定配置（需要定制）⚠️

| 文件 | 内容 | 需要修改 |
|------|------|---------|
| `project-config.md` | 项目特定配置 | ✅ 每个项目不同 |
| `scripts/check_project_structure.py` | 结构检查（allowed_items） | ✅ 根据项目调整 |

---

## 🔄 规则同步策略

### 同步原则

**通用规则**: 
- ✅ 主项目（owlRD）更新后，同步到所有项目
- ✅ 保持所有项目规则一致
- ✅ 版本号统一管理

**项目特定配置**:
- ⚠️ 不同步，各项目保持独立
- ⚠️ 各项目根据实际情况配置

---

## 📊 当前同步状态

### 已同步项目

| 项目 | 路径 | 同步状态 | 版本 |
|------|------|---------|------|
| **owlRD-原型项目** | `D:\test_Project\owlRD-原型项目` | ✅ 主项目 | v1.5.0 |
| **WiseFido项目** | `D:\test_Project\WiseFido_TDPv1_Coding_Dictionary` | ✅ 已同步 | v1.5.0 |

### 同步内容清单

**2025-11-26 同步**:
- [x] `00-core-principles.md` - 核心原则
- [x] `01-file-operations.md` - 文件操作
- [x] `02-directory-management.md` - 目录管理
- [x] `03-naming-convention.md` - 命名规范
- [x] `04-git-workflow.md` - Git工作流
- [x] `05-change-synchronization.md` - 变更同步
- [x] `06-directory-architecture-template.md` - **架构模板** ⭐ 新增
- [x] `README.md` - 规则说明
- [x] `config.json` - 规则配置（版本号v1.5.0）

---

## 🎯 06-架构模板通用化

### 更新内容

**之前**: 针对WiseFido项目的特定架构  
**现在**: 通用的标准项目架构 ⭐

### 通用化改进

1. **多种架构变体**
   - 变体1: 全栈项目（FastAPI + React）
   - 变体2: 纯后端API（如WiseFido）
   - 变体3: 纯前端项目
   - 变体4: 微服务架构
   - 变体5: 数据科学项目

2. **技术栈中立**
   - 不限定特定框架
   - 适用FastAPI/Django/Flask
   - 适用React/Vue/Angular

3. **项目类型选择指南**
   - 清晰的变体对比
   - 选择决策表
   - 核心不变原则

### 适用场景

**完全适用**:
- ✅ 前后端分离全栈项目
- ✅ 纯后端API项目（REST API）
- ✅ 原型开发项目
- ✅ 微服务系统

**需要调整**:
- ⚠️ 数据科学项目（添加notebooks目录）
- ⚠️ 移动端项目（调整目录结构）

---

## 🔧 同步操作步骤

### 手动同步（当主项目更新后）

```bash
# 从owlRD主项目同步到其他项目

# 1. 进入主项目
cd D:\test_Project\owlRD-原型项目

# 2. 同步通用规则到目标项目
set TARGET=D:\test_Project\WiseFido_TDPv1_Coding_Dictionary

# 3. 复制所有通用规则文件
xcopy .windsurfrules\00-core-principles.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\01-file-operations.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\02-directory-management.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\03-naming-convention.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\04-git-workflow.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\05-change-synchronization.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\06-directory-architecture-template.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\README.md %TARGET%\.windsurfrules\ /Y
xcopy .windsurfrules\config.json %TARGET%\.windsurfrules\ /Y

# 4. 注意：不要复制project-config.md（项目特定）
echo "⚠️ project-config.md 保持各项目独立"
```

### 自动同步脚本（可选）

创建 `.windsurfrules/scripts/sync_rules.bat`:

```bash
@echo off
REM 规则系统同步脚本

echo 🔄 开始同步规则系统...

set SOURCE=D:\test_Project\owlRD-原型项目\.windsurfrules
set TARGET=%1

if "%TARGET%"=="" (
    echo ❌ 错误：请指定目标项目路径
    echo 用法: sync_rules.bat "D:\path\to\target\project"
    exit /b 1
)

echo 📁 源项目: %SOURCE%
echo 📁 目标项目: %TARGET%

REM 复制通用规则文件
xcopy "%SOURCE%\00-core-principles.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\01-file-operations.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\02-directory-management.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\03-naming-convention.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\04-git-workflow.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\05-change-synchronization.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\06-directory-architecture-template.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\README.md" "%TARGET%\.windsurfrules\" /Y
xcopy "%SOURCE%\config.json" "%TARGET%\.windsurfrules\" /Y

echo.
echo ✅ 同步完成！
echo.
echo ⚠️ 请注意：
echo   - project-config.md 未同步（项目特定配置）
echo   - check_project_structure.py 未同步（需手动调整）
echo.

pause
```

**使用方法**:
```bash
cd D:\test_Project\owlRD-原型项目\.windsurfrules\scripts
sync_rules.bat "D:\test_Project\WiseFido_TDPv1_Coding_Dictionary"
```

---

## ⚠️ 注意事项

### 不要同步的文件

以下文件**各项目保持独立，不要同步**：

1. **`project-config.md`** ⚠️
   - 包含项目特定信息
   - 项目名称、路径、目录结构
   - 各项目必须单独配置

2. **`scripts/check_project_structure.py`** ⚠️
   - `allowed_items` 列表项目特定
   - 根据实际目录结构调整
   - 不能直接覆盖

3. **项目特定文档** ⚠️
   - `移植完成报告.md`
   - `WiseFido项目重构指南.md`
   - 其他项目特定说明

### 同步后的检查

```bash
# 1. 检查版本号是否一致
type .windsurfrules\config.json | findstr version

# 2. 检查规则文件是否完整
dir .windsurfrules\*.md

# 3. 运行结构检查
python .windsurfrules\scripts\check_project_structure.py

# 4. 验证移植性
python .windsurfrules\scripts\verify_portability.py
```

---

## 📝 版本历史

### v1.5.0 (2025-11-26)

**重大更新**: 添加通用架构模板

**新增**:
- ✅ `06-directory-architecture-template.md` - 通用项目架构模板
- ✅ 5种架构变体（全栈/纯后端/纯前端/微服务/数据科学）
- ✅ 架构选择指南

**改进**:
- ✅ 架构模板通用化，不针对特定项目
- ✅ 配置文件名称统一为"通用AI规则系统"
- ✅ 两个项目规则完全同步

**同步状态**:
- ✅ owlRD-原型项目：v1.5.0
- ✅ WiseFido项目：v1.5.0

---

### v1.4.1 (2025-11-26)

**关键更新**: 添加"问题必须解决"原则

---

### v1.4.0 (2025-11-26)

**重要更新**: 添加变更同步规则

---

## 🚀 未来规划

### 计划改进

1. **自动化同步工具**
   - 开发sync_rules工具
   - 支持批量同步多个项目
   - 版本检查和冲突检测

2. **版本管理**
   - 规则版本号管理
   - 变更日志自动生成
   - 兼容性检查

3. **扩展支持**
   - 更多架构变体
   - 更多技术栈模板
   - 项目初始化向导

---

## 💡 最佳实践

### 主项目维护

**owlRD-原型项目** 作为规则系统的**主项目**：

1. ✅ 所有通用规则在此更新
2. ✅ 更新后同步到其他项目
3. ✅ 维护规则版本号
4. ✅ 记录变更历史

### 其他项目使用

**其他项目**（如WiseFido）：

1. ✅ 定期从主项目同步通用规则
2. ✅ 保持project-config.md独立
3. ✅ 根据项目调整check_project_structure.py
4. ✅ 验证规则适配性

---

**维护者**: Cascade AI  
**主项目**: owlRD-原型项目  
**版本**: v1.5.0  
**状态**: ✅ 已同步

🎯 **规则系统现已完全同步，架构模板通用化完成！**
