---
title: "架构使用指南"
description: "架构模板的使用说明"
trigger: manual
---

## 馃幆 蹇€熷紑濮?
### 鏂规硶1: 浣跨敤鍒濆鍖栬剼鏈紙鎺ㄨ崘锛夆瓙

```bash
# 1. 杩涘叆宸ヤ綔鐩綍
cd D:\Projects

# 2. 杩愯鍒濆鍖栬剼鏈?python path\to\.windsurfrules\scripts\init_project_from_template.py MyNewProject

# 3. 鏌ョ湅鐢熸垚鐨勯」鐩?cd MyNewProject
```

**鑴氭湰浼氳嚜鍔ㄥ垱寤?*:
- 鉁?瀹屾暣鐨勭洰褰曠粨鏋?- 鉁?鏍稿績閰嶇疆鏂囦欢锛坅pp.py, requirements.txt绛夛級
- 鉁?鍩虹娴嬭瘯妗嗘灦
- 鉁?鏁版嵁楠岃瘉鑴氭湰
- 鉁?README鏂囨。

---

### 鏂规硶2: 鎵嬪姩鍒涘缓

#### 姝ラ1: 鍒涘缓椤圭洰鐩綍

```bash
mkdir MyNewProject
cd MyNewProject
```

#### 姝ラ2: 澶嶅埗瑙勫垯绯荤粺

```bash
# 浠庣幇鏈夐」鐩鍒?xcopy D:\path\to\.windsurfrules .windsurfrules\ /E /I

# 楠岃瘉澶嶅埗鎴愬姛
dir .windsurfrules
```

#### 姝ラ3: 鍙傝€冩灦鏋勬ā鏉垮垱寤虹洰褰?
鏌ョ湅 `.windsurfrules/06-directory-architecture-template.md`锛屾寜鐓фā鏉垮垱寤虹洰褰曪細

```bash
# 鏍稿績鐩綍
mkdir data schema spec scripts tests examples 椤圭洰鏂囨。

# 鍙€夌洰褰?mkdir 椤圭洰澶囦唤 褰掓。鏂囦欢 娴嬭瘯鎶ュ憡 鑷姩鐢熸垚鏂囨。

# 鍥剧墖鐩綍
mkdir image\README
```

#### 姝ラ4: 鍒涘缓鏍稿績鏂囦欢

```bash
# 涓诲簲鐢?echo. > app.py

# 閰嶇疆鏂囦欢
echo. > requirements.txt
echo. > pytest.ini
echo. > .gitignore

# 鏂囨。
echo. > README.md
```

#### 姝ラ5: 淇敼瑙勫垯绯荤粺閰嶇疆

缂栬緫涓や釜鏂囦欢锛?
1. **`.windsurfrules/project-config.md`**
   - 淇敼椤圭洰鍚嶇О
   - 淇敼椤圭洰璺緞
   - 璋冩暣鐩綍缁撴瀯瀹氫箟

2. **`.windsurfrules/scripts/check_project_structure.py`**
   - 淇敼 `allowed_items` 鍒楄〃
   - 閫傞厤浣犵殑椤圭洰鐩綍鍚?
---

## 馃摉 鏋舵瀯妯℃澘璇﹁В

### 鏍稿績鐞嗗康

**10澶х洰褰曞垎绫?*:

| 搴忓彿 | 鍒嗙被 | 鐩綍 | 鑱岃矗 |
|------|------|------|------|
| 1锔忊儯 | 鏍稿績浠ｇ爜鍖?| 鏍圭洰褰?| app.py, requirements.txt |
| 2锔忊儯 | 鏁版嵁瀛樺偍鍖?| data/ | 鏍稿績鏁版嵁鏂囦欢 |
| 3锔忊儯 | 瑙勮寖瀹氫箟鍖?| schema/, spec/ | 鏁版嵁楠岃瘉鍜岃鑼冩枃妗?|
| 4锔忊儯 | 宸ュ叿鑴氭湰鍖?| scripts/ | 缁存姢鑴氭湰鍜屽伐鍏?|
| 5锔忊儯 | 娴嬭瘯鍖?| tests/ | 鎵€鏈夋祴璇曟枃浠?|
| 6锔忊儯 | 鏂囨。鍖?| 椤圭洰鏂囨。/ | 鎵嬪啓鏂囨。 |
| 7锔忊儯 | 澶囦唤褰掓。鍖?| 椤圭洰澶囦唤/, 褰掓。鏂囦欢/ | 鐗堟湰澶囦唤鍜屽綊妗?|
| 8锔忊儯 | 鐭ヨ瘑搴撳尯 | 1_xxx_婧愬弬鑰冩枃浠? | 鍙鍙傝€?|
| 9锔忊儯 | 閰嶇疆鐜 | .venv/, .vscode/ | 寮€鍙戠幆澧?|
| 馃敓 | 瑙勫垯绯荤粺 | .windsurfrules/ | AI瑙勫垯绯荤粺 |

---

## 馃帹 鐩綍璁捐鍘熷垯

### 1. 鍒嗗眰娓呮櫚

```
鉁?濂界殑璁捐:
椤圭洰/
鈹溾攢鈹€ app.py              # 浠ｇ爜
鈹溾攢鈹€ data/               # 鏁版嵁
鈹溾攢鈹€ tests/              # 娴嬭瘯
鈹斺攢鈹€ 椤圭洰鏂囨。/            # 鏂囨。

鉂?涓嶅ソ鐨勮璁?
椤圭洰/
鈹溾攢鈹€ app.py
鈹溾攢鈹€ test_app.py         # 娴嬭瘯娣峰湪浠ｇ爜涓?鈹溾攢鈹€ data.json           # 鏁版嵁鍦ㄦ牴鐩綍
鈹斺攢鈹€ README.md
```

### 2. 鑱岃矗鍗曚竴

**姣忎釜鐩綍鍙仛涓€浠朵簨**:
- `scripts/` - 鍙斁缁存姢鑴氭湰
- `tests/` - 鍙斁娴嬭瘯鏂囦欢
- `data/` - 鍙斁鏁版嵁鏂囦欢

### 3. 鏄撲簬鎵╁睍

```
鍒濆缁撴瀯:
data/
鈹斺攢鈹€ data.json

鎵╁睍鍚?
data/
鈹溾攢鈹€ v1/
鈹?  鈹斺攢鈹€ data.json
鈹斺攢鈹€ v2/
    鈹斺攢鈹€ data.json
```

---

## 馃敡 甯歌鍦烘櫙

### 鍦烘櫙1: FastAPI REST API椤圭洰

**瀹屽叏绗﹀悎姝ゆā鏉?*

```
椤圭洰/
鈹溾攢鈹€ app.py                    # FastAPI搴旂敤
鈹溾攢鈹€ data/                     # JSON鏁版嵁
鈹溾攢鈹€ schema/                   # Pydantic schemas
鈹溾攢鈹€ tests/                    # API娴嬭瘯
鈹斺攢鈹€ .windsurfrules/           # 瑙勫垯绯荤粺
```

### 鍦烘櫙2: 鏁版嵁搴撻┍鍔ㄩ」鐩?
**闇€瑕佹坊鍔爉igrations鐩綍**

```
椤圭洰/
鈹溾攢鈹€ app.py
鈹溾攢鈹€ migrations/               # 鏁版嵁搴撹縼绉昏剼鏈?猸?鏂板
鈹?  鈹溾攢鈹€ versions/
鈹?  鈹斺攢鈹€ alembic.ini
鈹溾攢鈹€ models/                   # ORM妯″瀷 猸?鏂板
鈹溾攢鈹€ tests/
鈹斺攢鈹€ .windsurfrules/
```

### 鍦烘櫙3: 鍓嶇+鍚庣鍏ㄦ爤椤圭洰

**闇€瑕佸垎绂诲墠鍚庣鐩綍**

```
椤圭洰/
鈹溾攢鈹€ backend/                  # 鍚庣鐩綍 猸?璋冩暣
鈹?  鈹溾攢鈹€ app.py
鈹?  鈹溾攢鈹€ data/
鈹?  鈹斺攢鈹€ tests/
鈹溾攢鈹€ frontend/                 # 鍓嶇鐩綍 猸?鏂板
鈹?  鈹溾攢鈹€ src/
鈹?  鈹溾攢鈹€ public/
鈹?  鈹斺攢鈹€ package.json
鈹斺攢鈹€ .windsurfrules/
```

---

## 馃挕 鏈€浣冲疄璺?
### 1. 浣跨敤閰嶇疆闆嗕腑绠＄悊

**鍒涘缓 `scripts/_config.py`**:
```python
from pathlib import Path

# 椤圭洰鏍圭洰褰?PROJECT_ROOT = Path(__file__).parent.parent

# 鐩綍璺緞
DATA_DIR = PROJECT_ROOT / "data"
SCHEMA_DIR = PROJECT_ROOT / "schema"
TESTS_DIR = PROJECT_ROOT / "tests"

# 鏂囦欢璺緞
DATA_FILE = DATA_DIR / "data.json"
```

**濂藉**:
- 鉁?璺緞缁熶竴绠＄悊
- 鉁?淇敼涓€澶勶紝鍏ㄥ眬鐢熸晥
- 鉁?閬垮厤纭紪鐮?
### 2. 淇濇寔鏍圭洰褰曟暣娲?
```bash
# 鉁?鏍圭洰褰曞彧鏀炬牳蹇冩枃浠?app.py
requirements.txt
README.md
.gitignore

# 鉂?涓嶈鍦ㄦ牴鐩綍鍫嗙Н
test.py              # 鈫?搴旇鍦?tests/
backup.json          # 鈫?搴旇鍦?椤圭洰澶囦唤/
temp.txt             # 鈫?涓存椂鏂囦欢搴旇鍒犻櫎
```

### 3. 浣跨敤鑷姩鍖栬剼鏈?
```bash
# 鏁版嵁楠岃瘉
python scripts/validate_data.py

# 鐢熸垚鏂囨。
python scripts/generate_docs.py

# 椤圭洰缁熻
python scripts/get_stats.py
```

### 4. 鐗堟湰澶囦唤瑙勮寖

```bash
# 鍛藉悕鏍煎紡
v{鐗堟湰鍙穧-{鎻忚堪}_{鏃ユ湡}_{鏃堕棿}/

# 绀轰緥
椤圭洰澶囦唤/
鈹溾攢鈹€ v1.0.0-initial-release_20251126_100000/
鈹溾攢鈹€ v1.1.0-add-feature_20251201_143000/
鈹斺攢鈹€ v2.0.0-major-refactor_20251215_091500/
```

---

## 馃搵 鍒涘缓娓呭崟

### 蹇呴渶椤?鉁?
```bash
鈻?README.md                    # 椤圭洰璇存槑
鈻?app.py                       # 涓诲簲鐢?鈻?requirements.txt             # 渚濊禆娓呭崟
鈻?.gitignore                   # Git蹇界暐瑙勫垯

鈻?data/                        # 鏁版嵁鐩綍
鈻?schema/                      # Schema鐩綍
鈻?scripts/                     # 鑴氭湰鐩綍
鈻?tests/                       # 娴嬭瘯鐩綍

鈻?.windsurfrules/              # 瑙勫垯绯荤粺
  鈻?project-config.md          # 宸蹭慨鏀归厤缃?  鈻?check_project_structure.py # 宸茶皟鏁碼llowed_items
```

### 鎺ㄨ崘椤?猸?
```bash
鈻?spec/                        # 瑙勮寖鏂囨。
鈻?examples/                    # 绀轰緥浠ｇ爜
鈻?椤圭洰鏂囨。/                     # 鎵嬪啓鏂囨。

鈻?pytest.ini                   # Pytest閰嶇疆
鈻?Dockerfile                   # Docker闀滃儚
鈻?docker-compose.yml           # Docker缂栨帓

鈻?start_api.bat                # 鍚姩鑴氭湰
```

### 鍙€夐」 鈽?
```bash
鈻?椤圭洰澶囦唤/                     # 鐗堟湰澶囦唤
鈻?褰掓。鏂囦欢/                     # 鍘嗗彶褰掓。
鈻?娴嬭瘯鎶ュ憡/                     # 娴嬭瘯杈撳嚭
鈻?鑷姩鐢熸垚鏂囨。/                 # 鑷姩鐢熸垚鐨勬枃妗?鈻?1_xxx_婧愬弬鑰冩枃浠?             # 鐭ヨ瘑搴?```

---

## 馃毃 甯歌閿欒

### 閿欒1: 鐩綍缁撴瀯娣蜂贡

**闂**:
```
椤圭洰/
鈹溾攢鈹€ app.py
鈹溾攢鈹€ test_api.py              # 娴嬭瘯鏂囦欢鍦ㄦ牴鐩綍
鈹溾攢鈹€ backup_20251126.json     # 澶囦唤鍦ㄦ牴鐩綍
鈹斺攢鈹€ 涓存椂绗旇.txt              # 涓存椂鏂囦欢鍦ㄦ牴鐩綍
```

**瑙ｅ喅**:
```
椤圭洰/
鈹溾攢鈹€ app.py
鈹溾攢鈹€ tests/
鈹?  鈹斺攢鈹€ test_api.py          # 鉁?娴嬭瘯鏂囦欢鍦╰ests/
鈹溾攢鈹€ 椤圭洰澶囦唤/
鈹?  鈹斺攢鈹€ backup_20251126.json # 鉁?澶囦唤鍦ㄩ」鐩浠?
鈹斺攢鈹€ .gitignore               # 鉁?涓存椂鏂囦欢琚拷鐣ユ垨鍒犻櫎
```

### 閿欒2: 纭紪鐮佽矾寰?
**闂**:
```python
# 鉂?纭紪鐮佺粷瀵硅矾寰?data_path = "D:/Projects/MyProject/data/data.json"
```

**瑙ｅ喅**:
```python
# 鉁?浣跨敤鐩稿璺緞
from pathlib import Path
PROJECT_ROOT = Path(__file__).parent.parent
data_path = PROJECT_ROOT / "data" / "data.json"

# 鉁?浣跨敤閰嶇疆鏂囦欢
from scripts._config import DATA_FILE
data_path = DATA_FILE
```

### 閿欒3: 蹇樿鏇存柊瑙勫垯绯荤粺閰嶇疆

**闂**: 澶嶅埗浜嗚鍒欑郴缁熶絾娌℃湁淇敼閰嶇疆

**瑙ｅ喅**:
1. 鉁?淇敼 `.windsurfrules/project-config.md`
2. 鉁?淇敼 `.windsurfrules/scripts/check_project_structure.py`
3. 鉁?杩愯楠岃瘉: `python .windsurfrules/scripts/check_project_structure.py`

---

## 馃攳 楠岃瘉妫€鏌?
### 杩愯缁撴瀯妫€鏌?
```bash
python .windsurfrules\scripts\check_project_structure.py
```

**鏈熸湜杈撳嚭**:
```
鉁?椤圭洰缁撴瀯鍩烘湰绗﹀悎瑙勮寖
```

### 杩愯绉绘鎬ч獙璇?
```bash
python .windsurfrules\scripts\verify_portability.py
```

**鏈熸湜杈撳嚭**:
```
馃搳 绉绘鎬ц瘎鍒? 100/100 猸愨瓙猸愨瓙猸?瀹岀編
```

---

## 馃摎 鍙傝€冩枃妗?
### 瑙勫垯绯荤粺鏂囨。

1. **鏋舵瀯妯℃澘** - `.windsurfrules/06-directory-architecture-template.md`
2. **鏍稿績鍘熷垯** - `.windsurfrules/00-core-principles.md`
3. **鐩綍绠＄悊** - `.windsurfrules/02-directory-management.md`
4. **鏂囦欢鎿嶄綔** - `.windsurfrules/01-file-operations.md`

### 宸ュ叿鑴氭湰

1. **init_project_from_template.py** - 椤圭洰鍒濆鍖?2. **check_project_structure.py** - 缁撴瀯妫€鏌?3. **verify_portability.py** - 绉绘鎬ч獙璇?
---

## 馃挰 甯歌闂

### Q1: 鎴戠殑椤圭洰涓嶆槸FastAPI锛岃兘鐢ㄨ繖涓ā鏉垮悧锛?
**A**: 鍙互锛佹灦鏋勬ā鏉跨殑鏍稿績鏄?*鐩綍鍒嗙被鐞嗗康**锛屼笉闄愬畾鎶€鏈爤銆?
璋冩暣寤鸿锛?- Django椤圭洰 鈫?淇濈暀鏍稿績缁撴瀯锛岃皟鏁碼pp鐩綍
- Flask椤圭洰 鈫?瀹屽叏閫傜敤
- 鐖櫕椤圭洰 鈫?娣诲姞output/鐩綍瀛樺偍缁撴灉
- 鏁版嵁鍒嗘瀽椤圭洰 鈫?娣诲姞notebooks/鐩綍

### Q2: 蹇呴』瀹屽叏鎸夌収妯℃澘鍒涘缓鍚楋紵

**A**: 涓嶅繀椤伙紝浣嗗缓璁?*淇濈暀鏍稿績鍒嗙被**銆?
蹇呴渶鐨勫垎绫伙細
- 鉁?浠ｇ爜鍖猴紙鏍圭洰褰曟垨src/锛?- 鉁?娴嬭瘯鍖猴紙tests/锛?- 鉁?鏂囨。鍖猴紙椤圭洰鏂囨。/鎴杁ocs/锛?- 鉁?瑙勫垯绯荤粺锛?windsurfrules/锛?
鍙€夌殑鍒嗙被锛?- 鈽?澶囦唤鍖?- 鈽?褰掓。鍖?- 鈽?鐭ヨ瘑搴撳尯

### Q3: 瑙勫垯绯荤粺浼氳嚜鍔ㄥ己鍒舵灦鏋勫悧锛?
**A**: 鏋舵瀯妯℃澘鏄?*鍙傝€冨缓璁?*锛屼笉鏄己鍒惰鍒欍€?
- 馃摉 `06-directory-architecture-template.md` 鏄弬鑰冩枃妗?- 馃敶 `check_project_structure.py` 浼氭鏌?`allowed_items`
- 鉁忥笍 浣犻渶瑕佹墜鍔ㄤ慨鏀?`allowed_items` 浠ュ尮閰嶄綘鐨勭洰褰?
### Q4: 濡備綍璁╁洟闃熸垚鍛樺揩閫熶笂鎵嬶紵

**A**: 浣跨敤鍒濆鍖栬剼鏈?+ 鏂囨。

```bash
# 1. 鍒嗕韩瑙勫垯绯荤粺
灏?.windsurfrules/ 娣诲姞鍒伴」鐩?
# 2. 鍥㈤槦鎴愬憳闃呰鏂囨。
README.md
.windsurfrules/06-directory-architecture-template.md

# 3. 鏌ョ湅鏋舵瀯浣跨敤鎸囧崡
.windsurfrules/鏋舵瀯妯℃澘浣跨敤鎸囧崡.md
```

---

## 馃帗 杩涢樁鎶€宸?
### 鎶€宸?: 鍒涘缓椤圭洰妯℃澘浠撳簱

```bash
# 1. 鍒涘缓妯℃澘浠撳簱
mkdir ProjectTemplate
cd ProjectTemplate

# 2. 杩愯鍒濆鍖栬剼鏈?python init_project_from_template.py Template .

# 3. 鎻愪氦鍒癎it
git init
git add .
git commit -m "Initial template"
git remote add origin <your-repo-url>
git push -u origin main

# 4. 浣跨敤妯℃澘鍒涘缓鏂伴」鐩?git clone <template-repo-url> MyNewProject
```

### 鎶€宸?: 鑷畾涔夊垵濮嬪寲鑴氭湰

淇敼 `init_project_from_template.py`锛?- 娣诲姞浣犲父鐢ㄧ殑渚濊禆
- 璋冩暣鐩綍缁撴瀯
- 鑷畾涔夋枃浠舵ā鏉?
### 鎶€宸?: 閰嶅悎椤圭洰绠＄悊宸ュ叿

```bash
# 涓嶮akefile缁撳悎
make init          # 鍒濆鍖栭」鐩?make test          # 杩愯娴嬭瘯
make docs          # 鐢熸垚鏂囨。
make check         # 缁撴瀯妫€鏌?
# 涓巔re-commit缁撳悎
# .pre-commit-config.yaml
hooks:
  - id: check-structure
    entry: python .windsurfrules/scripts/check_project_structure.py
```

---

## 馃攧 鎸佺画鏀硅繘

### 鏀堕泦鍙嶉

濡傛灉浣犲湪浣跨敤涓彂鐜帮細
- 鉁?鏂扮殑鏈€浣冲疄璺?- 馃悰 妯℃澘鐨勯棶棰?- 馃挕 鏀硅繘寤鸿

璇疯褰曞湪锛?- `椤圭洰鏂囨。/鏋舵瀯鏀硅繘寤鸿.md`
- 鎴栨彁浜ゅ埌瑙勫垯绯荤粺鐨処ssue

### 鐗堟湰婕旇繘

鏋舵瀯妯℃澘浼氶殢鐫€瀹炶返涓嶆柇鏀硅繘锛?- v1.0 - 鍒濆鐗堟湰锛堝熀浜巓wlRD鍘熷瀷椤圭洰鎻愮偧锛?- v1.1 - 鏀寔鏇村椤圭洰绫诲瀷锛堝叏鏍?鍚庣/鍓嶇/寰湇鍔?鏁版嵁绉戝锛?- v2.0 - 璁″垝锛氭坊鍔犳洿澶氭灦鏋勫彉浣撳拰鏈€浣冲疄璺?
---

**鍒涘缓鏃ユ湡**: 2025-11-26  
**鏈€鍚庢洿鏂?*: 2025-11-26  
**缁存姢鑰?*: Cascade AI  
**鐘舵€?*: 鉁?绋冲畾浣跨敤

馃帀 **寮€濮嬩娇鐢ㄦ灦鏋勬ā鏉匡紝蹇€熸惌寤鸿鑼冪殑椤圭洰缁撴瀯锛?*