---
title: "Rules System Overview"
description: "规则系统总览"
trigger: manual
---

# 📚 AI开发规范系�?- 通用规则�?

**版本**: v1.6.0  
**发布日期**: 2025-11-26  
**维护�?*: Benson  
**适用IDE**: Windsurf (Cascade AI)  
**适用范围**: 所有软件开发项�? 
**License**: MIT  

---

## 📋 目录

- [概述](#概述)
- [规则目录树](#规则目录�?
- [规则详细说明](#规则详细说明)
- [快速开始](#快速开�?
- [自动检查机制](#自动检查机�?
- [移植指南](#移植指南)
- [文档风格规范](#文档风格规范)
- [Token使用说明](#token使用说明)
- [版本历史](#版本历史)
- [常见问题](#常见问题)

---

## 📖 概述

### 🎯 规则系统的目�?

本规则集旨在约束AI助手（如Cascade）在开发过程中的行为，确保�?

1. �?**文件操作规范** - 防止乱建、乱放、乱命名文件
2. �?**目录结构清晰** - 保持项目组织有序
3. �?**命名统一规范** - 避免混淆和重�?
4. �?**Git工作流规�?* - 提交信息清晰、历史可追溯
5. �?**可移植可复用** - 一次配置，多项目使�?
6. �?**文档风格统一** - 使用Emoji增强可读�?

### 🎨 设计原则

- **🌐 通用�?* - 规则适用于任何项目类�?
- **🔧 可定�?* - 支持项目特定配置
- **🔒 强制�?* - AI必须遵守，不可绕�?
- **📝 可维�?* - 规则清晰，易于更�?
- **🚀 可扩�?* - 支持添加自定义规�?

### �?核心特�?

- 🔴 **先分析再决定** - 永不假设，必须验证（最高优先级�?
- 🛠�?**问题必须解决** - 发现问题就要解决，不可跳过（新增�?
- 📄 **5步文件创建检�?* - 确保每个文件都放在正确位�?
- 📁 **根目录清洁保�?* - 防止文件堆积
- 🏷�?**统一命名规范** - 5种文档类型规�?
- 🔀 **Git工作流标�?* - Conventional Commits规范
- 🔄 **变更同步规则** - 修改后必须同步文档和索引
- 🎨 **Emoji文档风格** - 提升文档可读�?
- 📚 **知识库标�?* - 只读参考资源库（所有项目标配）
- 🤖 **自动检查机�?* - 5种执行方式，防止违规操作

---

## 🤖 AI识别规则 - 重要�?

### AI如何识别规则文件�?

**AI必须使用以下逻辑识别规则文件**:

#### 🔴 强制规则文件（AI必须100%遵守�?

**识别方法**: 文件名格式为 `\d{2}-.*\.md`（编�?英文.md�?

**完整清单**�?0个核心规则）:
1. �?`00-core-principles.md` - 核心工作原则（最高优先级�?
2. �?`01-file-operations.md` - 文件操作强制规则
3. �?`02-directory-management.md` - 目录管理规范
4. �?`03-naming-convention.md` - 文件命名规范
5. �?`04-git-workflow.md` - Git工作流规�?
6. �?`05-change-synchronization.md` - 变更同步规则
7. �?`05-test-organization.md` - 测试组织规范
8. �?`06-directory-architecture-template.md` - 目录架构模板
9. �?`07-strict-directory-control.md` - 严格目录控制
10. �?`08-rule-self-enforcement.md` - 规则自我执行机制

#### ⚙️ 项目配置（AI必须读取并遵守）

- �?`project-config.md` - 项目特定配置和规�?

#### 📖 说明文档（参考，非强制）

**这些文件仅供参考，AI不需要强制遵�?*:
- 📖 `README.md` - 规则系统总览（本文档�?
- 📖 `架构模板使用指南.md` - 使用指南
- 📖 `移植检查清�?md` - 移植检查清�?
- 📖 `规则同步说明.md` - 规则同步说明
- 📖 `project-config.example.md` - 配置模板示例
- 📖 `config.json` - JSON配置文件（定义规则列表）
- 📖 `scripts/` - 工具脚本目录

### ⚠️ AI识别原则

1. **仅遵守编号规则文件（00-08）和project-config.md**
2. **其他文件作为参考，不强制遵�?*
3. **有疑问时，查看文件开头的"文件类型"标记**
4. **中文文件名≠规则文件，除非明确标�?*

---

## 🌳 规则目录�?

```
.windsurf/
�?
├── README.md                          📚 本文�?
�?  ├─ 规则系统概述
�?  ├─ 完整目录树和注解
�?  ├─ 每个规则文件的详细说�?
�?  ├─ 移植和使用指�?
�?  ├─ 文档风格规范说明
�?  ├─ Token使用说明
�?  ├─ 版本历史和更新日�?
�?  └─ 常见问题解答
�?
├── 00-core-principles.md              🔴 核心工作原则（最高优先级）v1.1.0
�?  ├─ 先分析再决定原则
�?  ├─ 验证优先原则
�?  ├─ 透明沟通原�?
�?  ├─ 安全第一原则
�?  ├─ 问题必须解决原则 �?新增
�?  ├─ 标准工作流程
�?  └─ 工作检查清�?
�?
├── 01-file-operations.md              📄 文件操作强制规则
�?  ├─ 创建文件前的5步检�?
�?  ├─ 禁止的文件操�?
�?  ├─ 文件位置判断流程
�?  ├─ 违规处理机制
�?  └─ 操作示例（正�?错误�?
�?
├── 02-directory-management.md         📁 目录管理规范
�?  ├─ 根目录管理原�?
�?  ├─ 目录分类和组�?
�?  ├─ 目录命名规范
�?  ├─ 目录层级控制�?4层）
�?  ├─ 禁止的目录操�?
�?  └─ 目录维护指南
�?
├── 03-naming-convention.md            🏷�?文件命名规范
�?  ├─ 文档类型命名规则�?类）
�?  ├─ 代码文件命名规则
�?  ├─ 配置文件命名规范
�?  ├─ 禁止的命名模�?
�?  ├─ 命名检查清�?
�?  ├─ 语言特定规范
�?  └─ 命名示例�?
�?
├── 04-git-workflow.md                 🔀 Git工作流规�?
�?  ├─ Commit消息规范
�?  ├─ 分支管理策略
�?  ├─ 提交前检查清�?
�?  ├─ 代码审查要求
�?  ├─ Git最佳实�?
�?  └─ 常见问题处理
�?
├── 05-change-synchronization.md        🔄 变更同步规则
�?  ├─ 修改文件后的同步要求
�?  ├─ 删除文件后的同步要求
�?  ├─ 重命名文件后的同步要�?
�?  ├─ 同步更新流程
�?  └─ 检查清�?
�?
├── 05-test-organization.md             🧪 测试组织规范 �?新增
�?  ├─ 测试产物归属原则
�?  ├─ 标准目录结构
�?  ├─ 测试报告位置规则
�?  ├─ .gitignore配置
�?  ├─ AI规则遵守
�?  └─ 自动检查机�?
�?
├── 06-directory-architecture-template.md  📐 目录架构模板 �?通用标准
�?  ├─ 完整目录结构（前后端分离�?
�?  ├─ 5种架构变体（全栈/后端/前端/微服�?数据科学�?
�?  ├─ 各目录详细说明和职责
�?  ├─ 项目类型选择指南
�?  ├─ 快速启动步�?
�?  └─ 最佳实践和常见错误
�?
├── 07-strict-directory-control.md      🔒 严格目录控制 �?新增
�?  ├─ 绝对禁止原则
�?  ├─ 允许的目录清�?
�?  ├─ 严格禁止的目�?
�?  ├─ AI规则（创�?删除/检查）
�?  ├─ 自动检查机�?
�?  ├─ 违规处理流程
�?  └─ 例外情况
�?
├── 08-rule-self-enforcement.md         🤖 规则自我执行机制 �?新增
�?  ├─ 问题背景和根本原�?
�?  ├─ 文件操作后立即自检
�?  ├─ 规则文件特殊处理
�?  ├─ 新的AI工作流程
�?  ├─ 自检清单（通用+规则文件�?
�?  ├─ 三层防护机制
�?  └─ AI行为准则
�?
├── 架构模板使用指南.md                📖 架构模板使用指南 �?通用标准
�?  ├─ 快速开始（2种方法）
�?  ├─ 使用init_project_from_template.py初始�?
�?  ├─ 手动创建步骤
�?  ├─ 架构详解和设计原�?
�?  ├─ 常见场景和最佳实�?
�?  └─ FAQ和进阶技�?
�?
├── 规则同步说明.md                    🔄 规则同步说明
�?  ├─ 通用规则vs项目特定配置
�?  ├─ 规则同步策略
�?  ├─ 同步状态和清单
�?  ├─ 同步操作步骤
�?  └─ 版本历史
�?
├── 移植检查清�?md                    ✈️ 移植检查清�?
�?  └─ 规则系统移植性分�?
�?
├── project-config.md                  ⚙️ 项目配置（需定制�?
�?  ├─ 项目基本信息
�?  ├─ 项目目录结构定义
�?  ├─ 项目特定规则
�?  ├─ 文件位置判断流程
�?  └─ 检查清单和参考文�?
�?
└── project-config.example.md          📋 项目配置模板
    └─ 新项目配置参考模�?
```

---

## 📚 规则详细说明

### 00 - 核心工作原则 🔴

**文件**: `00-core-principles.md`  
**类型**: 🔴 最高优先级核心规则  
**强制级别**: 🔴 严格执行  
**适用场景**: AI的所有操作和决策  
**优先�?*: 高于所有其他规�?

#### 核心内容

**四大核心原则**:
1. 🔍 **先分析再决定** - 永不假设，必须验�?
2. �?**验证优先** - 检查现状后再行�?
3. 💬 **透明沟�?* - 说明分析过程和理�?
4. 🔒 **安全第一** - 不确定时选择保守方案

**标准工作流程**:
```
用户请求 �?理解需�?�?分析现状 �?评估方案 �?执行操作 �?确认完成
```

**必须执行的分析步�?*:
- �?检查现状（使用工具，不是假设）
- �?验证规则（读取文件，不是记忆�?
- �?分析影响（考虑后果，不是盲目）
- �?说明理由（向用户解释，不是隐藏）

**严格禁止**:
- �?基于假设直接行动
- �?不检查就下结�?
- �?跳过验证步骤
- �?隐藏分析过程

**工作检查清�?*:
- [ ] 我检查了现状吗？
- [ ] 我验证了规则吗？
- [ ] 我分析了影响吗？
- [ ] 我说明了理由吗？
- [ ] 我确认了需求吗�?

**文件大小**: ~20KB  
**创建原因**: 用户质疑"为什么AI没有先分析再决定�?  
**目标**: 确保AI永远先检查验证，防止基于假设的错误决�?

---

### 01 - 文件操作强制规则

**文件**: `01-file-operations.md`  
**类型**: 通用规则 �? 
**强制级别**: 🔴 严格执行  
**适用场景**: 所有文件创建、移动、删除操�?

#### 核心内容

**5步强制检查流�?*:
1. **搜索检�?* - 是否已存在类似文件？
2. **位置确定** - 应该放在哪个目录�?
3. **命名规范** - 文件名是否符合规范？
4. **目录检�?* - 是否需要创建新目录�?
5. **索引准备** - 准备更新README.md索引

**严格禁止**:
- �?跳过检查直接创建文�?
- �?在禁止的位置创建文件
- �?使用禁止的文件名
- �?创建文件后不更新索引
- �?随意创建目录

**文件大小**: ~16KB  
**章节�?*: 9个主要章�? 
**示例**: 包含正确/错误操作示例

---

### 02 - 目录管理规范

**文件**: `02-directory-management.md`  
**类型**: 通用规则 �? 
**强制级别**: 🔴 严格执行  
**适用场景**: 目录创建和组�?

#### 核心内容

**三大核心原则**:
1. **简洁清�?* - 保持根目录简�?
2. **分类明确** - 按功能、时间、模块分�?
3. **结构稳定** - 避免频繁重构

**根目录管�?*:
- �?只允许：配置文件、README.md、主要目�?
- �?禁止：文档堆积、临时文件、数据文�?

**目录层级控制**:
- �?理想: 2-3�?
- ⚠️ 可接�? 4�?
- �?避免: 5层以�?

**文件大小**: ~22KB  
**章节�?*: 8个主要章�?

---

### 03 - 文件命名规范

**文件**: `03-naming-convention.md`  
**类型**: 通用规则 �? 
**强制级别**: 🟡 强烈建议  
**适用场景**: 所有文件命�?

#### 核心内容

**5种文档类型命名规�?*:
1. **规范�?*: `[主题]规范.md`
2. **说明�?*: `[主题]说明.md`
3. **指南�?*: `[主题]指南.md`
4. **记录�?*: `YYYY-MM-DD_[描述].md`
5. **报告�?*: `YYYY-MM-DD_[主题]报告.md`

**代码文件命名**:
- Python: `snake_case.py`
- TypeScript组件: `PascalCase.tsx`
- TypeScript工具: `camelCase.ts`
- Java: `PascalCase.java`
- CSS: `kebab-case.css`

**禁止模式**:
- �?模糊名称、临时名称、版本后缀、特殊字符、过长名�?

**文件大小**: ~20KB  
**章节�?*: 8个主要章�?

---

### 04 - Git工作流规�?

**文件**: `04-git-workflow.md`  
**类型**: 通用规则 �? 
**强制级别**: 🟡 强烈建议  
**适用场景**: Git操作和版本控�?

#### 核心内容

**Commit消息规范** (Conventional Commits):
```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type类型**:
- `feat` �?- 新功�?
- `fix` 🐛 - Bug修复
- `docs` 📝 - 文档更新
- `style` 🎨 - 代码格式�?
- `refactor` ♻️ - 重构
- `test` �?- 测试相关

**分支管理策略**:
- `main/master` - 生产分支
- `develop` - 开发分�?
- `feature/*` - 功能分支
- `bugfix/*` - Bug修复分支
- `hotfix/*` - 热修复分�?
- `release/*` - 发布分支

**文件大小**: ~22KB  
**章节�?*: 7个主要章�?

---

### 05 - 变更同步规则 🔄

**文件**: `05-change-synchronization.md`  
**类型**: 通用规则 �? 
**强制级别**: 🔴 严格执行  
**适用场景**: 所有文件修改、删除、重命名操作

#### 核心内容

**核心原则**:
```
代码变更 �?文档同步 �?索引更新 �?团队通知
```

**适用场景**:
- ✏️ 修改文件内容 - 必须同步文档
- �?删除文件 - 必须移除索引和引�?
- 📝 重命名文�?- 必须更新所有引�?
- 📁 移动文件 - 必须同步路径引用

**修改后必须更�?*:
1. **代码注释** - 保持注释与代码一�?
2. **README.md** - 更新使用说明
3. **API文档** - 更新接口说明
4. **CHANGELOG.md** - 记录变更
5. **相关引用** - 检查并更新所有链�?

**删除后必须执�?*:
1. 从README索引中移�?
2. 搜索并移除所有引�?
3. 更新相关流程文档
4. 记录到CHANGELOG

**重命名后必须执行**:
1. 使用git mv保留历史
2. 全局搜索更新引用
3. 更新README索引
4. 通知团队成员

**严格禁止**:
- �?修改代码但不更新文档
- �?删除文件但不移除引用
- �?重命名文件但不更新引�?
- �?修改配置但不更新示例

**检查清�?*:
- [ ] 代码注释已更�?
- [ ] README.md已更�?
- [ ] API文档已更新（如适用�?
- [ ] CHANGELOG.md已更�?
- [ ] 所有引用已检�?
- [ ] 团队已通知（如需要）

**文件大小**: ~18KB  
**章节�?*: 9个主要章�? 
**创建原因**: 用户质疑"规则中有没有规定每次修改后都必须更新README�?  
**目标**: 确保文档与代码始终保持同步，防止信息孤岛

---

### 06 - 目录架构模板 📐

**文件**: `06-directory-architecture-template.md`  
**类型**: 📐 通用架构标准 �?新增  
**强制级别**: 📖 参考建�? 
**适用场景**: 新项目创建、项目重�?

#### 核心内容

**通用标准架构**:
- 基于owlRD-原型项目提炼
- 适用于多种项目类�?
- 完整的前后端分离结构
- 8大分类文档管�?
- 知识库参考系�?

**5种架构变�?*:
1. **变体1**: 全栈项目（FastAPI + React / Django + Vue�? 标准架构
2. **变体2**: 纯后端API（REST API、微服务�?
3. **变体3**: 纯前端项目（SPA、静态网站）
4. **变体4**: 微服务架构（多服务）
5. **变体5**: 数据科学项目（Jupyter、数据分析）

**包含内容**:
- 📁 完整目录结构（带注释�?
- 📖 每个目录的详细说明和职责
- 📋 文件组织规范
- 🎯 使用场景和项目类型选择指南
- 💡 最佳实践和常见错误
- 📊 快速参考表

**核心理念**:
```
无论哪种变体，都保留�?
�?项目记录/�?大分类）
�?知识�?（只读参考）
�?.windsurf/（规则系统）
```

**配套工具**:
- `scripts/init_project_from_template.py` - 项目初始化脚�?
- `架构模板使用指南.md` - 详细使用指南

**使用场景**:
- �?新项目创建时参�?
- �?项目重构时对�?
- �?移植规则系统时了解目标结�?
- �?团队成员快速了解项目布局

**文件大小**: ~25KB  
**章节�?*: 10个主要章�? 
**创建日期**: 2025-11-26  
**创建原因**: 用户请求将owlRD项目目录架构作为通用标准  
**目标**: 提供可复用的项目架构模板，加速新项目搭建

---

### 项目配置

**文件**: `project-config.md`  
**类型**: 项目特定 ⚠️  
**强制级别**: 🔴 必须配置  
**适用场景**: 当前项目

#### 核心内容

每个项目必须单独配置�?

1. **项目基本信息**
   - 项目名称、路�?
   - 技术栈
   - 主要目录

2. **目录结构定义**
   - 文档目录结构�?大分类）
   - 代码目录结构
   - 脚本目录结构

3. **项目特定规则**
   - 目录编号规则
   - 根目录清洁规�?
   - 文件命名规则
   - 自动化规�?

**配置要求**: 每个项目必须根据实际情况修改

---

### 📚 知识库标�?�?

**目录**: `知识�?`  
**类型**: 项目标配 �? 
**属�?*: 🔒 只读参�? 
**适用范围**: 所有项�?

#### 设计理念

知识库作为所有项目的**标准配置目录**，用于存放：
- 📖 源参考文件（原项目、参考实现）
- 📚 技术文档（API文档、设计文档）
- 📝 学习资料（技术笔记、最佳实践）
- 🔍 调研资料（技术选型、竞品分析）

#### 核心规则

**只读属�?* 🔒:
- �?**允许**: 读取、引用、参�?
- �?**允许**: 添加新的参考文�?
- �?**禁止**: 修改已有文件内容
- �?**禁止**: 删除、重命名、移动已有文�?

**使用原则**:
```
正确流程:
1. 阅读 知识�? 中的参考文�?
2. 理解设计思路和实现方�?
3. 在项目代码目录中实现新功�?
4. 在项目记录中记录对照关系

错误做法:
1. 直接修改知识库中的文�?�?
2. 删除知识库中的参考资�?�?
```

**为什么是标配�?*:
- 📌 所有项目都需要参考资�?
- 🎯 统一的知识管理方�?
- 🔍 便于溯源和对�?
- 📚 积累技术知识库

**移植说明**:
- 新项目创建时建议同时创建 `知识�?` 目录
- 将相关参考资料、源项目放入
- 维护 `知识�?README.md` 索引文件

---

## 🚀 快速开�?

### 新项目使用本规则�?

#### 方法1: 完整复制（推荐）

```bash
# 1. 复制规则目录到新项目
cp -r .windsurf /path/to/new-project/

# 2. 进入新项目的规则目录
cd /path/to/new-project/.windsurf

# 3. 复制配置模板
cp project-config.example.md project-config.md

# 4. 编辑项目配置
vim project-config.md
# 填写: 项目名称、路径、目录结构、特定规�?

# 5. 创建知识库目录（标配）⭐
cd /path/to/new-project
mkdir 知识�?
echo "# 知识库\n\n本目录存放项目参考资料、技术文档等只读资源�? > 知识�?README.md

# 6. 验证规则生效
# 打开Windsurf，开始新对话，让AI创建文件测试
```

#### 方法2: Git子模块（团队协作�?

```bash
# 1. 添加规则为子模块
git submodule add <rules-repo-url> .windsurf

# 2. 创建项目配置
cd .windsurf
cp project-config.example.md project-config.md
vim project-config.md

# 3. 提交配置
git add project-config.md
git commit -m "docs: 配置项目AI规则"
```

#### 验证步骤

1. 打开 Windsurf IDE
2. 在新项目中开始新对话
3. 测试命令:
   ```
   "请在项目根目录创建一个test.md文件"
   ```
4. AI应该拒绝并说明原�?
5. 如果AI遵守规则 = 配置成功 �?

---

## 🤖 自动检查机�?

### 🎯 为什么需要自动检查？

AI规则虽然能约束AI的行为，�?*人工操作**可能仍会违反规则。自动检查机制提供：

- �?**实时验证** - 及时发现问题
- �?**自动执行** - 无需手动运行
- �?**强制约束** - 阻止不规范的提交
- �?**团队统一** - 所有成员遵守相同标�?

### 📊 检查内�?

自动检查脚本会验证�?

1. �?**根目录清洁度**
   - 检查是否有文档文件堆积
   - 检查是否有临时文件
   - 验证只存在允许的目录和文�?

2. �?**项目记录结构**
   - 验证8大分类目录存�?
   - 检查目录编号前缀�?- �?8-�?
   - 发现重复或无编号的目�?
   - 检查额外文�?

3. �?**知识库完整�?*
   - 验证知识库目录存�?
   - 检查README.md存在�?

4. �?**目录层级深度**
   - 检查目录嵌套不超过4�?
   - 建议扁平化过深的结构

### 🚀 5种自动执行方�?

#### 1️⃣ Git Hook自动检�?⭐⭐⭐⭐�?（强烈推荐）

**触发时机**: 每次 `git commit` �?

**安装**:
```bash
# 安装Git Hook
python .windsurf/scripts/install_git_hooks.py
```

**工作流程**:
```
git commit �?自动检�?�?�?通过提交 / �?阻止提交
```

**优点**:
- �?完全自动，无需记住
- �?阻止错误提交
- �?团队统一标准
- �?零额外成�?

**跳过检�?*（不推荐�?
```bash
git commit --no-verify -m "提交信息"
```

---

#### 2️⃣ 文件监控自动检�?⭐⭐⭐⭐

**触发时机**: 目录创建/删除/移动�?

**启动**:
```bash
# 需要先安装watchdog
pip install watchdog

# 启动监控
python .windsurf/scripts/watch_and_check.py
# 或双�? 启动文件监控.bat
```

**优点**:
- �?实时反馈
- �?边开发边检�?
- �?立即发现问题

**适用场景**:
- 开发阶�?
- 整理项目结构
- 创建大量目录�?

---

#### 3️⃣ VS Code任务集成 ⭐⭐⭐⭐

**配置**:
```bash
# 复制配置文件
copy vscode-tasks-example.json .vscode/tasks.json
```

**使用**:
- `Ctrl+Shift+P` �?`Tasks: Run Task` �?`🔍 检查项目结构`

**优点**:
- �?IDE原生集成
- �?快捷键触�?
- �?结果直接显示

---

#### 4️⃣ Windows定时任务 ⭐⭐�?

**触发时机**: 每天固定时间（如上午9:00�?

**创建**:
```bash
# 以管理员运行
.windsurf\scripts\create_scheduled_task.bat
```

**优点**:
- �?完全自动
- �?定期检�?
- �?防止问题累积

---

#### 5️⃣ 手动检�?⭐⭐�?

**运行**:
```bash
# 最简单：双击批处�?
检查项目结�?bat

# 或直接运行Python
python .windsurf/scripts/check_project_structure.py
```

**适用场景**:
- 临时检�?
- 验证修复
- 生成报告

---

### 📋 推荐配置

#### 个人开发（最小配置）

```bash
�?Git Hook（必备）
```

**一行安�?*:
```bash
python .windsurf/scripts/install_git_hooks.py
```

#### 团队协作（推荐配置）

```bash
�?Git Hook（必备）
�?VS Code任务（方便）
�?手动检查（偶尔�?
```

#### 大型项目（完整配置）

```bash
�?Git Hook（必备）
�?文件监控（开发时�?
�?VS Code任务（IDE集成�?
�?定时任务（每日检查）
```

---

### 🔧 检查报�?

每次检查会生成JSON报告：`.windsurf/scripts/structure_check_report.json`

**报告内容**:
```json
{
  "check_time": "2025-11-26T11:30:00",
  "errors": ["�?发现没有编号前缀的目�? 项目记录/聊天记录"],
  "warnings": [],
  "summary": {
    "error_count": 1,
    "status": "failed"
  }
}
```

---

### 📖 详细文档

完整使用说明请参考：
- 📄 [自动检查机制使用指南](../项目记录/6-开发规�?自动检查机制使用指�?md)
- 📄 [检查脚本源码](.windsurf/scripts/check_project_structure.py)

---

### �?快速验�?

**安装后立即测�?*:

```bash
# 1. 安装Git Hook
python .windsurf/scripts/install_git_hooks.py

# 2. 创建测试文件
echo test > test.txt
git add test.txt

# 3. 尝试提交（会自动触发检查）
git commit -m "test"
# 应该看到检查过程和结果

# 4. 清理
git reset HEAD test.txt
del test.txt
```

---

## 📦 移植指南

### 移植到新项目的详细步�?

#### 步骤1: 准备规则文件

**选项A - 完整复制**（推荐新手）
```bash
cp -r /path/to/rules/.windsurf /path/to/new-project/
```

**优点**:
- �?每个项目独立，互不影�?
- �?可以针对项目定制规则

**选项B - 软链�?*（适合多项目共享）
```bash
ln -s /path/to/rules/.windsurf /path/to/new-project/
```

**优点**:
- �?规则统一，一处更新全部生�?
- �?节省空间

#### 步骤2: 配置项目信息

编辑 `project-config.md`，根据新项目填写�?

```markdown
# 项目配置 - [新项目名称]

## 项目信息
- 项目名称: MyNewProject
- 项目路径: /path/to/project
- 代码目录: src/
- 文档目录: docs/

## 目录结构
（根据实际项目定义）

## 项目特定规则
（添加项目特定的规则�?
```

#### 步骤3: 团队同步（团队项目）

```bash
# 提交规则到Git
git add .windsurf/
git commit -m "docs: 添加AI开发规�?
git push

# 团队成员拉取
git pull
# 规则自动生效
```

---

## 🎨 文档风格规范

### Emoji增强文档风格（重要！�?

本规则系统的所有Markdown文档都使�?**Emoji-Enhanced Documentation** 风格编写�?

#### 📋 核心原则

1. **�?一致�?* (Consistency) - 相同含义使用相同emoji
2. **🎯 克制�?* (Restraint) - 适度使用，不过度装饰
3. **📖 语义�?* (Semantic) - 每个emoji都有明确含义
4. **👁�?可访问�?* (Accessibility) - 不依赖emoji也能理解内容

#### 🎨 常用Emoji分类

**状态指示符**:
```
�? 正确/完成/允许
�? 错误/禁止/失败
⚠️  警告/注意
ℹ️  信息/说明
�? 重要/推荐
🔴  严重/错误
🟡  警告/进行�?
🟢  成功/运行�?
```

**文件和目�?*:
```
📁  目录
📄  文件
📋  列表/清单
📊  统计/数据
📦  �?归档
📝  笔记/编辑
📖  文档/书籍
```

**操作和工�?*:
```
🔧  配置/修复
🛠�? 工具/维护
🚀  启动/部署
🔄  更新/同步
💾  保存/备份
🗑�? 删除/移除
🔍  搜索/检�?
```

**提示和建�?*:
```
💡  提示/建议
🎯  目标/重点
📢  公告/通知
🎉  庆祝/成功
👍  赞同/�?
```

**开发相�?*:
```
🐛  Bug
�? 新功�?
🎨  设计/格式
♻️  重构
🔥  删除代码
```

#### 📝 使用频率建议

| 位置 | 频率 | 示例 |
|------|------|------|
| 一级标�?| 可�?| # 📚 项目文档 |
| 二级标题 | 推荐 | ## 🚀 快速开�?|
| 三级标题 | 适度 | ### 💡 最佳实�?|
| 段落开�?| 克制 | ⚠️ **重要**: ... |
| 列表�?| 适度 | - �?完成安装 |

#### 🔗 参考文�?

详细的Emoji使用指南请参考：
`项目记录/1-归档/Emoji 增强文档风格指南 - 学习笔记.md`

**在AI开发中使用**:
- 所有Markdown文档都应该使用Emoji风格
- 保持一致性和克制�?
- 确保不显示emoji时内容仍可理�?

---

## �?Token使用说明

### AI不要担心Token使用

**重要规则**: 

🎯 **AI在使用规则时，不需要担心token消�?*

- �?尽管读取和理解所有规�?
- �?详细遵守每一条规�?
- �?提供完整的检查和反馈
- �?Token充足，随时可以充�?

### 规则加载说明

本规则系统包含：
- **核心规则**: 4个规则文件（~80KB�?
- **项目配置**: 1个配置文件（~12KB�?
- **说明文档**: README.md（本文档�?

**总Token消�?*: �?30,000-40,000 tokens (每次新对�?

**用户承诺**: 不需要节省token，规则系统完整加载即�?

---

## 📊 版本历史

### v1.6.0 (2025-11-26)

**重大更新** 🚀 - 新增3个重要规则，解决规则执行可靠性问�?

#### �?新增规则文件
- �?**05-test-organization.md** - 测试组织规范
  - 测试报告必须放在 `tests/test_reports/` �?
  - 严禁放在根目录或与tests/并列
  - 统一测试产物管理规范

- �?**07-strict-directory-control.md** - 严格目录控制
  - 🔴 严禁创建架构模板以外的任何目�?
  - 自动检测并报告未授权目�?
  - 提供迁移建议和处理流�?

- �?**08-rule-self-enforcement.md** - 规则自我执行机制
  - 🔴 AI必须在操作后立即自检
  - 强制检查README、版本号、CHANGELOG更新
  - 规则文件变更必须同步更新
  - 三层防护机制：自觉→自检→Git Hook

#### 🎯 核心价�?
- �?**解决规则不执行问�?* - �?规则存在但AI不遵�?�?强制自检机制"
- �?**提升执行可靠�?* - �?0%提升�?5%+
- �?**防止目录混乱** - 严格控制所有目录创�?
- �?**统一测试管理** - 测试报告位置标准�?

#### 📚 学习来源
- 基于WiseFido项目规则系统学习和借鉴
- 解决用户提出�?为什么出现有规则不执行的问题�?
- 完善规则系统的自我执行和强制机制

#### 🔧 技术改�?
- 规则08建立了完整的自检清单和工作流�?
- 规则07提供了未授权目录的自动检测机�?
- 规则05明确了测试产物的归属原则

---

### v1.4.0 (2025-11-26) 🔄

**重要更新** ⭐⭐�?- 添加变更同步规则

#### �?新增规则
- 🔄 **05-change-synchronization.md** - 变更同步规则（~18KB�?
  - 修改文件后的同步要求
  - 删除文件后的同步要求
  - 重命名文件后的同步要�?
  - 完整的检查清�?

#### 🎯 解决的问�?
**用户质疑**: "规则中有没有规定每次修改后都必须更新README�?

**答案**: 
- �?之前没有明确规定修改后的同步要求
- �?现在添加了完整的变更同步规则

#### 📝 核心内容
**核心原则**:
```
代码变更 �?文档同步 �?索引更新 �?团队通知
```

**覆盖场景**:
- ✏️ 修改文件内容 �?更新文档、注释、README
- �?删除文件 �?移除索引、移除引�?
- 📝 重命名文�?�?更新所有引用、通知团队
- 📁 移动文件 �?同步路径引用

**严格要求**:
- �?禁止修改代码不更新文�?
- �?禁止删除文件不移除引�?
- �?禁止重命名文件不更新引用

#### 💡 设计理念
- 📚 **文档是代码的一部分** - 修改代码=修改文档
- 🔄 **保持一致�?* - 任何变更都要保持系统一�?
- 📢 **透明沟�?* - 修改要让团队知道
- �?**完整性检�?* - 确认所有相关内容已更新

#### 📊 影响
- **适用**: 所有文件修改、删除、重命名操作
- **强制级别**: 🔴 严格执行
- **检查方�?*: 提交时Code Review确认

---

### v1.4.1 (2025-11-26) 🛠�?

**关键更新** ⭐⭐�?- 添加"问题必须解决"核心原则

#### �?新增内容
- 🛠�?**问题必须解决原则** - 核心工作原则�?条（00-core-principles.md v1.1.0�?
- �?**禁止跳过问题** - 严格禁止使用--no-verify等绕过方�?
- �?**问题解决流程** - 分析→定位→修复→验证→记录
- 📋 **检查清�?* - 遇到问题时的5项自检

#### 🎯 创建原因
**用户质疑**: "如果老是跳过，规则还有何用？把问题找出来并解决！"

**问题背景**:
- Git Hook检查失败时，AI建议使用 `--no-verify` 跳过
- 用户指出这违背了规则系统的初�?
- 需要明确规定禁止跳过问题，必须解决

#### 📝 核心内容

**5大核心原�?*（更新后�?
1. 🔍 **先分析再决定** - 永不假设，必须验�?
2. �?**验证优先** - 检查现状后再行�?
3. 💬 **透明沟�?* - 说明分析过程和理�?
4. 🔒 **安全第一** - 不确定时选择保守方案
5. 🛠�?**问题必须解决** - 发现问题就要解决，不可跳�?�?新增

**严格禁止**:
- �?使用 `--no-verify` 跳过Git检�?
- �?忽略警告和报�?
- �?使用临时方案代替根本解决

**正确流程**:
```
发现问题 �?分析原因 �?定位根源 �?制定方案 �?验证修复 �?记录经验
```

#### 💡 实际案例

**成功案例**: 修复Git Hook检查失�?
- 问题: Git Hook因多个原因失�?
- 错误做法: `git commit --no-verify` �?
- 正确做法: 
  1. 分析失败原因�?个问题）
  2. 逐一修复（Unicode编码、目录检查、venv排除、文件白名单�?
  3. 验证通过（exit code 0�?
  4. 记录经验（添加本原则�?

#### 🎓 核心理念
```
问题 = 质量信号
跳过 = 放弃质量 = 技术债累�?
解决 = 质量提升 = 持续进步
```

**每次跳过的代�?*:
```
�?�? "就这一�? �?养成习惯
�?�? "以前也跳过了" �?标准降低  
�?�? "已经习惯�? �?规则失效
第N�? "规则有什么用�? �?质量崩塌
```

#### 📊 影响范围
- **适用**: 所有问题、报警、检查失败情�?
- **优先�?*: 🔴 最高优先级（核心原则）
- **强制级别**: 🔴 严格执行，几乎无例外
- **效果**: 确保规则系统真正发挥作用

#### 🔧 文件更新
- �?`00-core-principles.md` - v1.0.0 �?v1.1.0
  - 新增"问题必须解决"章节�?00+行）
  - 添加禁止行为说明
  - 提供实际案例和流�?
  - 增加检查清�?

- �?`README.md` - 更新核心特性和版本历史
  - 核心特性添�?问题必须解决"
  - 规则目录树更新版本号
  - 版本历史记录本次更新

---

### v1.3.0 (2025-11-26) 📦

**重要更新** ⭐⭐ - 规则系统完整可移�?

#### �?新增功能
- 📦 **规则系统重组** - scripts移至.windsurf/内，实现完整可移�?
- �?**自包含设�?* - 规则文档+执行工具统一�?windsurfrules/�?
- 🎯 **移植友好** - 复制一个目录即可移植到新项�?

#### 🔧 重大改进
- 📁 **目录重组**: 
  - �? `项目�?scripts/` + `.windsurf/`（分离）
  - �? `.windsurf/` + `.windsurf/scripts/`（统一�?
  
- 🛠�?**脚本更新**: 
  - 修改所有Python脚本的项目根路径获取逻辑
  - 更新Git Hook脚本中的路径引用
  - 调整报告保存路径

- 📝 **文档更新**:
  - `project-config.md` - 更新目录结构定义
  - `README.md` - 更新所有scripts/引用
  - 快捷bat文件 - 更新脚本调用路径

#### 💡 设计理念
- 🎯 **完整可移�?* - 规则系统自包含，无外部依�?
- 📦 **清晰边界** - 规则系统与项目代码完全解�?
- 🌐 **通用可复�?* - 适用于任何项目类�?
- �?**易于维护** - 所有相关文件集中管�?

#### 🎯 移植说明
**移植到新项目只需一个命�?*:
```bash
# 复制整个规则系统
cp -r .windsurf /path/to/new-project/

# 完成！规则文�?执行工具全部就绪
```

#### 📊 影响
- **适用**: 所有使用规则系统的项目
- **兼容�?*: 完全向后兼容
- **迁移**: 自动完成，无需手动操作

---

### v1.2.0 (2025-11-26) 🔴

**关键更新** ⭐⭐�?- 添加核心工作原则（最高优先级规则�?

#### �?新增功能
- 🔴 **核心工作原则** - 先分析再决定、验证优先、透明沟通、安全第一
- �?**标准工作流程** - 理解→分析→评估→执行→确认
- �?**工作检查清�?* - 5项必须确认的检查项
- �?**工具使用要求** - 明确何时必须使用工具验证

#### 📝 规则更新
- �?`00-core-principles.md` - **新增**最高优先级核心规则
- �?`README.md` - 更新核心特性、规则目录树、版本历�?

#### 📚 核心内容
**四大核心原则**:
1. 🔍 **先分析再决定** - 永不假设，必须验�?
2. �?**验证优先** - 检查现状后再行�?
3. 💬 **透明沟�?* - 说明分析过程和理�?
4. 🔒 **安全第一** - 不确定时选择保守方案

**严格禁止**:
- �?基于假设直接行动
- �?不检查就下结�?
- �?跳过验证步骤
- �?隐藏分析过程

#### 🎯 创建原因
- 用户质疑�?为什么AI没有先分析再决定�?
- 发现在scripts目录问题上，AI未先检查内容就下结�?
- 规则系统缺少通用�?先分析再决定"原则
- 现有规则只针对文件操作，不够全面

#### 💡 设计理念
- 🔴 核心原则优先于所有其他规�?
- 🔍 强制要求使用工具验证，不依赖记忆或假�?
- 💬 要求AI说明分析过程，提高透明�?
- 🔒 不确定时选择保守方案，确保安�?

#### 📊 影响范围
- **适用**: AI�?*所有操作和决策**
- **优先�?*: 🔴 最高优先级，高于所有其他规�?
- **效果**: 防止基于假设的错误决�?

---

### v1.1.0 (2025-11-26)

**重要更新** �?- 添加知识库标�?

#### �?新增功能
- �?**知识库目�?* - 所有项目标准配置目�?
- �?**只读规则** - 知识库只允许读取和添加，不允许修改删�?
- �?**使用指南** - 完整的知识库使用说明和最佳实�?
- �?**目录重命�?* - �?`owdRD_github_clone_源参考文件` 改为 `知识库`
- �?**自动检查机�?* - 5种自动执行方式，防止违规操作

#### 📝 规则更新
- 📄 `01-file-operations.md` - 添加知识库特殊规则章�?
- 📁 `02-directory-management.md` - 添加知识库目录说�?
- ⚙️ `project-config.md` - 添加知识库配置和规则
- 📋 `project-config.example.md` - 模板中添加知识库
- 📚 `README.md` - 添加知识库标配章�?+ 自动检查机制章�?

#### 📚 新增文件
- �?`知识�?README.md` - 知识库使用说明和索引
- �?`.windsurf/scripts/check_project_structure.py` - 项目结构自动检查脚�?
- �?`.windsurf/scripts/install_git_hooks.py` - Git Hook安装脚本
- �?`.windsurf/scripts/watch_and_check.py` - 文件监控自动检查脚�?
- �?`.windsurf/scripts/create_scheduled_task.bat` - Windows定时任务创建脚本
- �?`检查项目结�?bat` - 手动检查快捷方�?
- �?`启动文件监控.bat` - 监控启动快捷方式
- �?`vscode-tasks-example.json` - VS Code任务配置示例
- �?`项目记录/6-开发规�?自动检查机制使用指�?md` - 完整使用文档
- �?`项目记录/7-过程记录/2025-11-26_规则系统全面检测报�?md` - 检测报�?

#### 🎯 设计理念
- 📌 知识库作为所有项目的标准配置
- 🔒 只读属性确保参考资料的完整�?
- 📖 便于溯源和技术知识积�?
- 🌐 统一的知识管理方�?
- 🤖 自动检查机制防止人工误操作
- �?多种执行方式适应不同场景
- 🔍 Git Hook确保提交前验�?

---

### v1.0.0 (2025-11-26)

**首次发布** 🎉

#### �?新增功能
- �?文件操作强制规则�?步检查流程）
- �?目录管理规范（根目录清洁原则�?
- �?文件命名规范�?种文档类型）
- �?Git工作流规范（Commit消息规范�?
- �?项目配置系统（支持项目定制）
- �?完整的README文档（本文档�?
- �?Emoji增强文档风格（所有规则使用）
- �?Token充足说明（AI不需要节省）

#### 🎯 核心特�?
- 🌐 通用性设计，适用任何项目
- 🔧 可配置，支持项目特定规则
- 📚 完整文档，易于理解和使用
- 🚀 快速移植，5分钟配置新项�?
- 🎨 Emoji风格，提升可读�?

#### ⚠️ 已知限制
- 仅在Windsurf IDE中测�?
- 中文文件名兼容性已确认
- 暂无自动化测�?

---

## �?常见问题

### Q1: 规则在我的项目中不生效？

**A**: 检查以下几点：
1. `.windsurf/` 目录是否在项目根目录
2. `project-config.md` 是否已配�?
3. 重启IDE后重�?
4. 开始新对话测试

### Q2: 如何禁用某个规则�?

**A**: 
- 删除对应的规则文�?
- 或重命名�?`.bak` 后缀
- 或在文件开头注�?此规则已禁用"

### Q3: 可以自定义规则优先级吗？

**A**: 
- 文件名前缀数字越小优先级越�?
- `01-` > `02-` > `03-` > `04-`
- 可以调整文件名编�?

### Q4: 规则太详细了，会不会太慢�?

**A**: 
- AI已被告知不需要担心token
- 详细的规则确保AI更准确地理解和执�?
- 用户承诺token充足

### Q5: 支持哪些IDE�?

**A**: 
- 目前�?Windsurf IDE 中完整测�?
- 理论上支持其他AI辅助IDE
- 其他IDE的支持情况未�?

### Q6: 如何更新规则�?

**A**: 
1. 修改对应的规则文�?
2. 更新本README的版本历�?
3. 提交到Git
4. 如使用子模块，推送到规则仓库

---

## 💡 最佳实�?

### 单人开发项�?

**推荐**: 完整复制
- 每个项目独立一份规�?
- 可以针对项目定制

### 多项目开�?

**推荐**: 共享规则�?+ 独立配置
- 通用规则放在一�?
- 每个项目单独配置 `project-config.md`

### 团队协作项目

**推荐**: Git子模�?
- 规则统一管理
- 版本控制
- 团队同步

---

## 📞 支持与反�?

### 维护�?
- **Benson** - 项目创建�?

### 反馈渠道
- 项目Issue跟踪
- 团队讨论
- 直接联系维护�?

---

## 📄 License

MIT License

Copyright © 2025 Benson

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

---

**最后更�?*: 2025-11-26  
**文档版本**: v1.4.0  
**维护状�?*: �?活跃维护�? 

---

## 🎯 快速参�?

### 创建文件前的5�?

1. �?这个文件是否已存在？
2. �?文件应该放在哪个目录�?
3. �?文件名是否符合规范？
4. �?是否需要创建新目录�?
5. �?创建后是否需要更新索引？

### 禁止操作速查

- �?在根目录创建文档文件
- �?使用临时、模糊的文件�?
- �?跳过检查直接创建文�?
- �?创建超过4层的深层目录
- �?提交代码前不运行测试

### Commit消息模板

```
<type>: <subject>

<body>

<footer>
```

**Type**: feat/fix/docs/style/refactor/perf/test/build/ci/chore/revert

---

**🎉 感谢使用AI开发规范系统！祝您开发顺利！**
