---
trigger: always_on
description: "项目结构识别与配置规范"
---

# 项目结构与配置

**规则类型**: 🟡 智能决策规则  
**适用场景**: AI需要项目信息或创建目录时

---

## 🎯 核心原则

### 1. 观察优先
- **先观察** 项目现有结构
- **后创建** 符合规范的目录
- **不假设** 项目应该怎样

### 2. 遵循标准
- 使用项目现有的组织方式
- 如果是新项目，使用通用标准
- 保持目录结构清晰简洁

### 3. 适应项目
- 每个项目都是独特的
- 通过观察和询问确认
- 不强加固定模式

---

## 📊 项目信息获取

### 1. 项目基本信息

**查找位置**：
- README.md - 项目根目录
- package.json / pyproject.toml / pom.xml - 技术栈信息

**需要了解**：
- 项目名称
- 项目类型（Web应用/API/工具等）
- 主要技术栈
- 开发阶段

---

### 2. 目录结构识别

**查找方式**：
`ash
# 查看根目录结构
ls -la

# 查看代码目录
find . -maxdepth 2 -type d
`

**常见结构**：
- src/ 或 app/ - 源代码
- tests/ - 测试文件
- docs/ - 文档
- scripts/ - 脚本工具

---

### 3. 技术栈识别

**后端**：
- Python: requirements.txt, pyproject.toml, *.py
- Node.js: package.json, *.js, *.ts
- Java: pom.xml, build.gradle, *.java

**前端**：
- React: package.json + react dependency
- Vue: package.json + vue dependency
- Angular: angular.json

**数据库**：
- 查看配置文件或 docker-compose.yml
- 查看依赖（psycopg2, mysql-connector, mongodb）

---

## 📁 通用目录架构

### 标准项目结构（可选参考）

`
项目根目录/
 src/ 或 app/          # 源代码目录
    main/            # 主程序
    utils/           # 工具函数
    config/          # 配置文件
 tests/               # 测试文件
    test_reports/    # 测试报告（可选）
 docs/                # 项目文档（可选）
 scripts/             # 脚本工具（可选）
 .gitignore           # Git忽略文件
 README.md            # 项目说明
 [配置文件]           # package.json, requirements.txt等
`

---

##  🔍 特定项目类型的目录建议

### Web应用项目
`
project/
 backend/             # 后端代码
    src/
    tests/
    requirements.txt
 frontend/            # 前端代码
    src/
    public/
    package.json
 docs/                # 文档
 README.md
`

### API服务项目
`
project/
 src/
    routes/          # API路由
    models/          # 数据模型
    controllers/     # 控制器
    middleware/      # 中间件
 tests/
 docs/
 README.md
`

### 命令行工具
`
project/
 src/                 # 源代码
 tests/               # 测试
 README.md
 setup.py (或 package.json)
`

### 数据科学项目
`
project/
 notebooks/           # Jupyter notebooks
 data/                # 数据文件
    raw/            # 原始数据
    processed/      # 处理后数据
 models/              # 训练模型
 src/                 # 源代码
 reports/             # 分析报告
`

---

## 📋 增强型目录结构（可选）

**如果项目需要完善的文档管理**，可以添加：

`
项目根目录/
 [代码目录]/
 项目记录/            # 项目文档目录（可选）
    归档/           # 历史文档
    功能说明/       # 功能文档
    部署运维/       # 部署指南
    开发规范/       # 编码规范
    过程记录/       # 临时文档
    聊天记录/       # AI对话记录
 README.md
`

**注意**：这是可选的增强结构，不是必需的！

---

## ✅ 创建目录的规则

### 必须遵守
1. ✅ 先检查目录是否已存在
2. ✅ 确认目录名称符合规范
3. ✅ 不创建重复或冗余的目录
4. ✅ 保持目录层级5层

### 禁止行为
1. ❌ 在根目录创建临时目录
2. ❌ 创建无意义的目录（如temp/, test123/）
3. ❌ 创建过深的目录嵌套（>5层）
4. ❌ 随意改变现有目录结构

---

## 📝 目录命名规范

### 推荐命名
- 使用小写字母
- 使用连字符或下划线分隔
- 名称简洁明确
- 避免缩写（除非是通用缩写如src, docs）

**好的命名**：
`
✅ src/
✅ tests/
✅ test_reports/
✅ user_management/
✅ api-routes/
`

**不好的命名**：
`
❌ temp/
❌ stuff/
❌ misc/
❌ old/
❌ backup_old_2023_final_v2/
`

---

## 🔧 通用配置规则

### 目录管理
**遵循02-目录管理规范.md**：
- 严格目录控制
- 不创建未定义的目录
- 保持根目录清洁

### 文件命名
**遵循03-文件命名规范.md**：
- 使用项目的命名习惯
- 观察现有文件的命名方式
- 保持一致性

### 特殊目录规则

**知识库目录**（如果存在）：
- 只读参考
- 不修改内容
- 参考08-知识库管理规范.md

**项目记录目录**（如果存在）：
- 用于存放项目文档
- 遵循编号目录结构

**tests/目录**：
- 测试文件
- 测试报告可放在 tests/test_reports/
- 参考06-测试组织规范.md

**.windsurf/rules/目录**：
- **仅存放规则文件**
- 禁止临时文档
- 禁止分析报告

---

## 🎯 AI行为指南

### 创建新目录前

**检查清单**：
1. [ ] 这个目录真的需要吗？
2. [ ] 项目中是否已有类似目录？
3. [ ] 目录名称清晰明确吗？
4. [ ] 位置选择合理吗？
5. [ ] 符合项目现有结构吗？

### 如果不确定
- 📖 查看项目README
- 🔍 观察现有目录组织
- 💬 询问用户意见
- �� 不要随意创建

---

## 📝 项目配置检查清单

AI在操作前应确认：

1. [ ] 项目名称是什么？
2. [ ] 主要技术栈是什么？
3. [ ] 代码在哪个目录？
4. [ ] 测试文件在哪里？
5. [ ] 是否有特殊目录规则？
6. [ ] 文档放在哪里？

**如果不确定，查看README.md或询问用户！**

---

## ✅ 最佳实践

### 1. 先观察，后行动
- 花时间了解项目
- 查看现有文件结构
- 理解项目约定

### 2. 简洁为上
- 不要创建不必要的目录
- 平铺优于深层嵌套
- 少即是多

### 3. 保持一致性
- 遵循项目现有风格
- 同类文件放在一起
- 命名保持统一

### 4. 可扩展性
- 考虑未来增长
- 留有扩展空间
- 避免频繁重构

### 5. 清晰明确
- 目录用途一目了然
- 避免歧义
- 便于团队协作

### 6. 尊重项目规范
- 阅读项目文档
- 遵循CONTRIBUTING.md（如果有）
- 不引入不必要的变化

### 7. 询问而不是假设
- 不确定的信息要询问
- 不要根据其他项目的经验假设
- 每个项目都是独特的

---

## 📊 目录结构检查

### 合规性检查
`ash
# 检查目录层级
find . -type d | awk '{print NF-1, }' FS='/' | sort -n

# 检查目录数量
find . -maxdepth 1 -type d | wc -l
`

### 常见问题
- ⚠️ 目录层级过深（>5层）
- ⚠️ 临时目录未清理
- ⚠️ 重复或冗余目录

---

## 💡 AI执行要求

### 做什么
✅ 观察现有项目结构
✅ 遵循项目现有的组织方式
✅ 阅读README了解项目
✅ 保持与现有代码风格一致
✅ 不确定时询问用户

### 不做什么
❌ 不假设项目结构
❌ 不引入与项目不符的技术
❌ 不随意改变目录结构
❌ 不创建未经确认的目录
❌ 不忽视现有规范

---

**这是一个灵活的指南，应该根据实际项目调整！** 🎯

**AI应该通过观察和学习来适应每个具体项目，而不是强加固定模式。**
