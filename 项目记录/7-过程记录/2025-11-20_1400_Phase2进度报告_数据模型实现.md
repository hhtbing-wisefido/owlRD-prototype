# Phase 2 è¿›åº¦æŠ¥å‘Š - æ•°æ®æ¨¡å‹å±‚å®ç?
**æ—¶é—´**: 2025-11-20 13:51 - 14:00  
**é˜¶æ®µ**: Phase 2 - æ•°æ®æ¨¡å‹å±‚å®Œæ•´å®ç? 
**çŠ¶æ€?*: ğŸš§ è¿›è¡Œä¸­ï¼ˆå·²å®Œæˆ?0%ï¼?
---

## âœ?å·²å®Œæˆçš„æ¨¡å‹ï¼?ä¸ªï¼‰

### 1. Locationç³»åˆ— âœ?(3ä¸ªæ¨¡å?

#### location.py - å®Œæ•´å®ç°
- **Location** (ä½ç½®æ¨¡å‹)
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?4_locations.sqlï¼?  - âœ?æ‰€æœ‰å­—æ®µéªŒè¯å™¨
  - âœ?location_typeéªŒè¯ï¼ˆInstitutional/HomeCareï¼?  - âœ?è­¦æŠ¥é€šæŠ¥ç»„é…ç½®ï¼ˆalert_user_ids, alert_tagsï¼?  - âœ?å…¬å…±ç©ºé—´/å¤šäººæˆ¿é—´æ ‡è¯†
  - âœ?å¸ƒå±€é…ç½®ï¼ˆlayout_configï¼?
- **Room** (æˆ¿é—´æ¨¡å‹)
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?5_rooms.sqlï¼?  - âœ?é»˜è®¤æˆ¿é—´æ ‡è¯†ï¼ˆis_defaultï¼?  - âœ?æˆ¿é—´çº§å¸ƒå±€é…ç½®

- **Bed** (åºŠä½æ¨¡å‹)
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?6_beds.sqlï¼?  - âœ?åºŠä½ç±»å‹éªŒè¯ï¼ˆActiveBed/NonActiveBedï¼?  - âœ?åºŠå«æè´¨å’Œåšåº¦éªŒè¯?  - âœ?è‡ªåŠ¨ç»´æŠ¤å­—æ®µï¼ˆbound_device_count, is_activeï¼?
### 2. Residentç³»åˆ— âœ?(5ä¸ªæ¨¡å?

#### resident.py - å®Œæ•´å®ç°
- **Resident** (ä½æˆ·æ¨¡å‹ - å®Œå…¨åŒ¿ååŒ?
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?7_residents.sqlï¼?  - âœ?åŒ¿åä»£ç§°ç³»ç»Ÿï¼ˆanonymous_nameï¼?  - âœ?HISç³»ç»ŸåŒæ­¥å­—æ®µï¼ˆä¸å«PIIï¼?  - âœ?å®¶åº­æ ‡ç­¾ï¼ˆfamily_tagï¼?  - âœ?ä½ç½®/åºŠä½ç»‘å®š
  - âœ?çŠ¶æ€éªŒè¯ï¼ˆactive/discharged/transferredï¼?  - âœ?å“ˆå¸Œå­—æ®µï¼ˆphone_hash, email_hashï¼‰æ’é™?
- **ResidentPHI** (ä½æˆ·å¥åº·ä¿¡æ¯ - åŠ å¯†å­˜å‚¨)
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?8_resident_phi.sqlï¼?  - âœ?åŸºæœ¬PHIï¼ˆå§“åã€æ€§åˆ«ã€å‡ºç”Ÿæ—¥æœŸã€è”ç³»æ–¹å¼ï¼‰
  - âœ?ç”Ÿç‰©ç‰¹å¾PHIï¼ˆä½“é‡ã€èº«é«˜ï¼‰
  - âœ?åŠŸèƒ½æ€§æ´»åŠ¨èƒ½åŠ›ï¼ˆmobility_level 0-5ï¼?  - âœ?åŠŸèƒ½æ€§å¥åº·çŠ¶æ€ï¼ˆtremor_status, mobility_aidç­‰ï¼‰
  - âœ?æ…¢æ€§ç—…å²ï¼ˆé«˜è¡€å‹ã€é«˜è¡€è„‚ã€ç³–å°¿ç—…ã€è„‘å’ä¸­ã€é˜¿å°”èŒ¨æµ·é»˜ç­‰ï¼‰
  - âœ?HISç³»ç»ŸåŒæ­¥å­—æ®µï¼ˆå«PIIï¼?  - âœ?HomeCareåœºæ™¯å®¶åº­åœ°å€ï¼ˆPHIï¼?
- **ResidentContact** (ä½æˆ·è”ç³»äº?å®¶å±è´¦å·)
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?9_resident_contacts.sqlï¼?  - âœ?æ§½ä½ç³»ç»Ÿï¼ˆA/B/C/D/Eï¼?  - âœ?æ§½ä½éªŒè¯å™?  - âœ?æƒé™é…ç½®ï¼ˆcan_view_status, can_receive_alertï¼?  - âœ?å…³ç³»å®šä¹‰ï¼ˆrelationshipï¼?  - âœ?å¯é€‰PHIå­—æ®µ
  - âœ?å“ˆå¸Œå­—æ®µæ’é™¤

- **ResidentCaregiver** (ä½æˆ·-æŠ¤å£«å…³è”)
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?0_resident_caregivers.sqlï¼?  - âœ?5ä¸ªæŠ¤ç†äººå‘˜IDå­—æ®µ
  - âœ?æŠ¤å£«ç»„æ ‡ç­¾ï¼ˆcaregivers_tagsï¼?
- **AnonymousNamePool** (åŒ¿åä»£ç§°æ±?- 300ä¸?
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?7_residents.sqlï¼?  - âœ?4ç§åˆ†ç±»ï¼ˆprofession/character/animal/itemï¼?  - âœ?åˆ†ç±»éªŒè¯å™?  - âœ?åˆ†é…çŠ¶æ€è¿½è¸?
### 3. Deviceç³»åˆ— âœ?(1ä¸ªæ¨¡å?

#### device.py - å®Œæ•´å®ç°
- **Device** (è®¾å¤‡æ¨¡å‹)
  - âœ?å®Œæ•´å­—æ®µæ˜ å°„ï¼?1_devices.sqlï¼?  - âœ?è®¾å¤‡æ ‡è¯†ï¼ˆdevice_name, device_model, device_typeï¼?  - âœ?åºåˆ—å?UIDéªŒè¯ï¼ˆè‡³å°‘å¡«ä¸€ä¸ªï¼‰
  - âœ?æŠ€æœ¯è§„æ ¼ï¼ˆcomm_mode, firmware_version, mcu_modelï¼?  - âœ?ä½ç½®ç»‘å®šï¼ˆlocation_id, bound_room_id, bound_bed_idï¼?  - âœ?ä¸‰æ€çŠ¶æ€ç®¡ç†ï¼ˆinstalled, business_access, monitoring_enabledï¼?  - âœ?çŠ¶æ€éªŒè¯å™¨ï¼ˆonline/offline/error/dormant/maintenanceï¼?  - âœ?é€šè®¯æ–¹å¼éªŒè¯å™¨ï¼ˆWiFi/LTE/Zigbee/Ethernet/LoRaï¼?  - âœ?è®¾å¤‡å…ƒæ•°æ®ï¼ˆmetadataï¼ŒåŒ…å«IoTé…ç½®ï¼?
---

## â?å¾…å®ç°çš„æ¨¡å‹ï¼?1ä¸ªï¼‰

### 4. IoTæ•°æ®ç³»åˆ— (2ä¸ªæ¨¡å?
- â?**IOTTimeseries** (IoTæ—¶åºæ•°æ® - 12_iot_timeseries.sql)
  - æ—¶åºæ•°æ®å­˜å‚¨
  - TimescaleDBè¶…è¡¨æ˜ å°„
  - æ•°æ®å‹ç¼©ç­–ç•¥
  - åˆ†ç‰‡å­˜å‚¨

- â?**IOTMonitorAlert** (IoTç›‘æ§è­¦æŠ¥ - 13_iot_monitor_alerts.sql)
  - è®¾å¤‡çº§åˆ«è­¦æŠ¥é…ç½®
  - å…œåº•å‘Šè­¦è®¾ç½®

### 5. Alertç³»åˆ— (1ä¸ªæ¨¡å?
- â?**CloudAlertPolicy** (äº‘ç«¯è­¦æŠ¥ç­–ç•¥ - 14_cloud_alert_policies.sql)
  - ç§Ÿæˆ·çº§å…¨å±€é…ç½®
  - å¤šçº§æŠ¥è­¦è§„åˆ™
  - è·¯ç”±å†³ç­–

### 6. Cardç³»åˆ— (2ä¸ªæ¨¡å?
- â?**Card** (å¡ç‰‡ - 18_cards.sql)
  - ActiveBedå¡ç‰‡
  - Locationå¡ç‰‡
  - è‡ªåŠ¨ç”Ÿæˆé€»è¾‘

- â?**CardFunction** (å¡ç‰‡å‡½æ•° - 19_card_functions.sql)
  - SQLå‡½æ•°æ˜ å°„
  - è‡ªåŠ¨åŒ–åˆ›å»?
### 7. Configç³»åˆ— (2ä¸ªæ¨¡å?
- â?**ConfigVersion** (é…ç½®ç‰ˆæœ¬ - 15_config_versions.sql)
- â?**MappingTable** (æ˜ å°„è¡?- 16_mapping_tables.sql)

### 8. TDPåè®®ç³»åˆ— (4ä¸ªæ¨¡å?
- â?**PersonMatrix** (äººå‘˜çŸ©é˜µ)
  - ç©ºé—´ä½ç½®ï¼ˆpos_x, pos_y, pos_zï¼?  - é€Ÿåº¦ä¿¡æ¯ï¼ˆvel_x, vel_y, vel_zï¼?  - å§¿æ€çŠ¶æ€ï¼ˆposture - SNOMED CTï¼?  - è¿åŠ¨çŠ¶æ€ï¼ˆmotion_state - SNOMED CTï¼?  - å¥åº·çŠ¶å†µï¼ˆhealth_score - SNOMED CTï¼?
- â?**ObjectMatrix** (ç‰©ä½“çŸ©é˜µ)
  - åºŠã€è½®æ¤…ã€æ²™å‘è¯†åˆ?  - å±é™©åŒºåŸŸæ ‡æ³¨
  - æˆ¿é—´å¸ƒå±€

- â?**TDPEvent** (TDPäº‹ä»¶)
  - LiteEventHeader
  - ExtendEventHeader
  - Protobufé›†æˆ

- â?**CodeableConcept/Tag** (ç¼–ç æ¦‚å¿µ/æ ‡ç­¾)

### 9. SNOMED CTç³»åˆ— (å®Œæ•´ç¼–ç ç³»ç»Ÿ)
- â?**PostureCode** (å§¿æ€ç¼–ç ?- å®Œæ•´å®ç°)
- â?**MotionStateCode** (è¿åŠ¨çŠ¶æ€ç¼–ç ?
- â?**HealthConditionCode** (å¥åº·çŠ¶å†µç¼–ç )

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

### æ¨¡å‹å®Œæˆåº?- **å·²å®Œæˆ?*: 8ä¸ªæ¨¡å‹ï¼ˆTenant, User, Role, Location, Room, Bed, Resident, ResidentPHI, ResidentContact, ResidentCaregiver, AnonymousNamePool, Deviceï¼?- **å¾…å®ç?*: 11ä¸ªæ¨¡å?- **æ€»è®¡**: 19ä¸ªæ ¸å¿ƒæ¨¡å?- **å®Œæˆç™¾åˆ†æ¯?*: 42% (8/19)

### ä»£ç é‡ç»Ÿè®?- **location.py**: 242è¡Œï¼ˆå®Œæ•´ï¼?- **resident.py**: 343è¡Œï¼ˆå®Œæ•´ï¼?- **device.py**: 145è¡Œï¼ˆå®Œæ•´ï¼?- **æ€»æ–°å¢ä»£ç ?*: ~730è¡?
### å­—æ®µæ˜ å°„å®Œæ•´æ€?- âœ?Location: 100% å­—æ®µæ˜ å°„
- âœ?Room: 100% å­—æ®µæ˜ å°„
- âœ?Bed: 100% å­—æ®µæ˜ å°„
- âœ?Resident: 100% å­—æ®µæ˜ å°„
- âœ?ResidentPHI: 100% å­—æ®µæ˜ å°„
- âœ?ResidentContact: 100% å­—æ®µæ˜ å°„
- âœ?ResidentCaregiver: 100% å­—æ®µæ˜ å°„
- âœ?AnonymousNamePool: 100% å­—æ®µæ˜ å°„
- âœ?Device: 100% å­—æ®µæ˜ å°„

---

## âœ?å…³é”®æˆå°±

### 1. å®Œæ•´å­—æ®µæ˜ å°„
- âœ?æ‰€æœ‰å·²å®ç°æ¨¡å‹å?00%æ˜ å°„SQLå­—æ®µ
- âœ?æœªç®€åŒ–ä»»ä½•å­—æ®?- âœ?ä¿æŒå®Œå…¨åŠŸèƒ½ç­‰ä»·æ€?
### 2. ä¸¥æ ¼ç±»å‹éªŒè¯
- âœ?æ‰€æœ‰æšä¸¾å­—æ®µéƒ½æœ‰field_validator
- âœ?å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶ä¸SQLä¸€è‡?- âœ?å¯é€‰å­—æ®µæ­£ç¡®æ ‡æ³?
### 3. HIPAAåˆè§„è®¾è®¡
- âœ?Residentè¡¨å®Œå…¨åŒ¿ååŒ–
- âœ?PHIæ•°æ®ç‹¬ç«‹å­˜å‚¨ï¼ˆResidentPHIï¼?- âœ?å“ˆå¸Œå­—æ®µæ­£ç¡®æ’é™¤ï¼ˆexclude=Trueï¼?- âœ?åŒ¿åä»£ç§°ç³»ç»Ÿå®Œæ•´å®ç°

### 4. ä¸šåŠ¡é€»è¾‘å®Œæ•´æ€?- âœ?Deviceä¸‰æ€ç®¡ç†ï¼ˆinstalled/business_access/monitoring_enabledï¼?- âœ?Bedè‡ªåŠ¨ç»´æŠ¤å­—æ®µï¼ˆbound_device_count, is_activeï¼?- âœ?Locationå¤šåœºæ™¯æ”¯æŒï¼ˆInstitutional/HomeCareï¼?- âœ?ResidentContactæ§½ä½ç³»ç»Ÿï¼ˆA/B/C/D/Eï¼?
### 5. éªŒè¯å™¨å®Œæ•´æ€?- âœ?location_type: Institutional/HomeCare
- âœ?bed_type: ActiveBed/NonActiveBed
- âœ?mattress_thickness: < 7in/7-10in/11-14in/14in+
- âœ?device status: online/offline/error/dormant/maintenance
- âœ?comm_mode: WiFi/LTE/Zigbee/Ethernet/LoRa
- âœ?slot: A/B/C/D/E
- âœ?category: profession/character/animal/item

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ?
### ç«‹å³æ‰§è¡Œ
1. å®ç°IoTæ•°æ®æ¨¡å‹ï¼ˆIOTTimeseries, IOTMonitorAlertï¼?2. å®ç°Alertæ¨¡å‹ï¼ˆCloudAlertPolicyï¼?3. å®ç°Cardç³»åˆ—æ¨¡å‹
4. å®ç°Configç³»åˆ—æ¨¡å‹
5. å®ç°TDPåè®®æ¨¡å‹ï¼ˆPersonMatrix, ObjectMatrixï¼?6. å®ç°SNOMED CTå®Œæ•´ç¼–ç ç³»ç»Ÿ

### é¢„è®¡å‰©ä½™å·¥ä½œé‡?- **IoTæ•°æ®**: ~200è¡?- **Alert**: ~150è¡?- **Card**: ~200è¡?- **Config**: ~100è¡?- **TDPåè®®**: ~300è¡?- **SNOMED CT**: ~200è¡?- **æ€»è®¡**: ~1150è¡Œä»£ç ?
---

## ğŸ” è´¨é‡æ£€æŸ?
### ä»£ç è´¨é‡ âœ?- âœ?æ‰€æœ‰æ¨¡å‹éƒ½æœ‰å®Œæ•´çš„docstring
- âœ?æ‰€æœ‰å­—æ®µéƒ½æœ‰description
- âœ?éªŒè¯å™¨é€»è¾‘æ­£ç¡®
- âœ?ç¤ºä¾‹æ•°æ®å®Œæ•´

### SQLæ˜ å°„å®Œæ•´æ€?âœ?- âœ?å­—æ®µåç§°ä¸€è‡´ï¼ˆsnake_caseï¼?- âœ?å­—æ®µç±»å‹æ­£ç¡®æ˜ å°„
- âœ?çº¦æŸæ¡ä»¶ä½“ç°åœ¨éªŒè¯å™¨ä¸?- âœ?ç´¢å¼•å­—æ®µåœ¨æ¨¡å‹ä¸­æ ‡æ³¨

### HIPAAåˆè§„æ€?âœ?- âœ?PIIå­—æ®µæ­£ç¡®éš”ç¦»
- âœ?åŒ¿ååŒ–æœºåˆ¶å®Œæ•?- âœ?å“ˆå¸Œå­—æ®µæ­£ç¡®å¤„ç†

---

## ğŸ“ å¤‡æ³¨

### è®¾è®¡å†³ç­–
1. **å®Œæ•´æ€§ä¼˜å…?*: æœªç®€åŒ–ä»»ä½•SQLå­—æ®µ
2. **ç±»å‹å®‰å…¨**: æ‰€æœ‰æšä¸¾éƒ½æœ‰éªŒè¯å™¨
3. **æ‰©å±•æ€?*: metadataå­—æ®µæ”¯æŒJSONB
4. **åˆè§„æ€?*: PHIæ•°æ®ä¸¥æ ¼éš”ç¦»

### æŠ€æœ¯äº®ç‚?1. Pydantic field_validatorç¡®ä¿æ•°æ®æœ‰æ•ˆæ€?2. Optionalå­—æ®µæ­£ç¡®æ ‡æ³¨
3. exclude=Trueç”¨äºæ•æ„Ÿå­—æ®µ
4. Config.json_schema_extraæä¾›å®Œæ•´ç¤ºä¾‹

---

**é˜¶æ®µçŠ¶æ€?*: ğŸš§ Phase 2 è¿›è¡Œä¸? 
**å®Œæˆåº?*: 42% (8/19 æ¨¡å‹)  
**è´¨é‡**: ä¼˜ç§€ï¼?00%å­—æ®µæ˜ å°„ï¼Œå®Œæ•´éªŒè¯å™¨ï¼? 
**ä¸‹ä¸€æ­?*: ç»§ç»­å®ç°å‰©ä½™11ä¸ªæ¨¡å?
---

**æŠ¥å‘Šäº?*: Cascade AI  
**å®Œæˆæ—¶é—´**: 2025-11-20 14:00
