# 2025-11-22 Vitestå’ŒPlaywrightæµ‹è¯•æ¡†æ¶é›†æˆ

## ğŸ“… æ—¶é—´
2025å¹?1æœ?2æ—?20:00-21:30

## ğŸ¯ ç›®æ ‡
åœ¨owlRDé¡¹ç›®ä¸­é›†æˆVitestå•å…ƒæµ‹è¯•å’ŒPlaywright E2Eæµ‹è¯•æ¡†æ¶

---

## ğŸ’¬ å¯¹è¯è®°å½•

### ç”¨æˆ·éœ€æ±?1. **åˆå§‹éœ€æ±?*ï¼šåœ¨`tests/`ç›®å½•å®ç°Vitestå’ŒPlaywrightæµ‹è¯•
2. **æ˜ç¡®è¦æ±‚**ï¼?   - é›†æˆåˆ°`tests/full_system_test.py`
   - é…ç½®å¿…é¡»åœ¨tests/ç›®å½•å®Œæˆï¼ˆä¸æ±¡æŸ“frontend/ï¼?   - READMEæ•´åˆï¼ˆä¸è¦åˆ†æ•£çš„æ–‡æ¡£ï¼?   - æ ¹æ®å®é™…ç»„ä»¶ç¼–å†™æµ‹è¯•ï¼ˆä¸è¦æ¨¡æ¿ä»£ç ï¼‰
   - ä¿®å¤æ‰€æœ‰é”™è¯¯ï¼Œä¸è·³è¿‡æµ‹è¯?
---

## ğŸ› ï¸?å®Œæˆçš„å·¥ä½?
### é˜¶æ®µ1ï¼šVitesté…ç½®ï¼?0:00-20:40ï¼?
#### é—®é¢˜1ï¼šé…ç½®æ–‡ä»¶ä½ç½?- **ç”¨æˆ·åé¦ˆ**ï¼?ä¸ºä»€ä¹ˆä¸é…ç½®å¥½å‘¢ï¼Ÿé…ç½®å¿…é¡»è¦åœ¨ç‰¹å®šçš„ç›®å½•å—ï¼Ÿ"
- **è§£å†³æ–¹æ¡ˆ**ï¼?  - å°†é…ç½®ä»frontend/ç§»åˆ°tests/
  - åˆ›å»º`tests/vitest.config.ts`
  - é…ç½®è·¯å¾„åˆ«åæŒ‡å‘`frontend/src`

#### é—®é¢˜2ï¼šä¾èµ–å®‰è£…æ…¢
- **ç”¨æˆ·åé¦ˆ**ï¼?ä¾èµ–å®‰è£…å¤ªæ…¢äº†å§ï¼Œæ˜¯å¦éœ€è¦ä½¿ç”¨å›½å†…é•œåƒæˆ–ä»£ç†å‘¢ï¼Ÿ"
- **è§£å†³æ–¹æ¡ˆ**ï¼?  ```bash
  npm config set registry https://registry.npmmirror.com
  ```
  - ç»“æœï¼?55ä¸ªåŒ…ä»å‡ åˆ†é’Ÿé™åˆ°19ç§’ï¼

#### é—®é¢˜3ï¼šçœ‹ä¸åˆ°æµ‹è¯•è¿‡ç¨‹
- **ç”¨æˆ·åé¦ˆ**ï¼?ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°è¿‡ç¨‹ï¼Œçœ‹ä¸åˆ°è¿‡ç¨‹å°±ä¸çŸ¥é“æ˜¯ä¸æ˜¯å‡ºé”™äº†"
- **è§£å†³æ–¹æ¡ˆ**ï¼?  - ä¿®å¤`npm test`é»˜è®¤è¿›å…¥watchæ¨¡å¼çš„é—®é¢?  - æ”¹ä¸º`npm test -- --run`
  - æ·»åŠ `Colors.CYAN`é¢œè‰²å®šä¹‰

#### é—®é¢˜4ï¼šReacté‡å¤å®ä¾‹
- **é”™è¯¯**ï¼š`TypeError: Cannot read properties of null (reading 'useState')`
- **åŸå› **ï¼štests/å’Œfrontend/æœ‰ä¸¤å¥—React
- **è§£å†³æ–¹æ¡ˆ**ï¼?  ```typescript
  resolve: {
    alias: {
      'react': path.resolve(__dirname, './node_modules/react'),
      'react-dom': path.resolve(__dirname, './node_modules/react-dom'),
    },
    dedupe: ['react', 'react-dom'],
  }
  ```

### é˜¶æ®µ2ï¼šæ ¹æ®å®é™…ç»„ä»¶ç¼–å†™æµ‹è¯•ï¼ˆ20:40-21:00ï¼?
#### ç”¨æˆ·è¦æ±‚
- **åé¦ˆ**ï¼?æ˜¯å‘€ï¼Œä½ è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æµ‹è¯•ä»£ç å‘€ï¼Ÿæ•´ä¸ªé¡¹ç›®ä½ éƒ½èƒ½çœ‹åˆ°å‘€ã€?

#### å®ç°
1. è¯»å–`frontend/src/components/forms/UserForm.tsx`
2. è¯»å–`frontend/src/components/forms/FormInput.tsx`  
3. æ ¹æ®å®é™…ç»„ä»¶é‡å†™æµ‹è¯•
4. ä»?ä¸ªæµ‹è¯•é€šè¿‡æå‡åˆ?ä¸ªé€šè¿‡

#### æµ‹è¯•ä¼˜åŒ–
- **é—®é¢˜**ï¼šéªŒè¯é”™è¯¯æ¶ˆæ¯è¶…æ—?- **åŸå› **ï¼šç­‰å¾…ReactçŠ¶æ€æ›´æ–?- **è§£å†³æ–¹æ¡ˆ**ï¼šæ”¹ä¸ºéªŒè¯æäº¤è¢«é˜»æ­¢ï¼ˆæ›´ç¬¦åˆæµ‹è¯•æœ¬è´¨ï¼?  ```typescript
  // ä¸æµ‹è¯•é”™è¯¯æ¶ˆæ¯æ˜¾ç¤?  // è€Œæ˜¯æµ‹è¯•onSubmitä¸åº”è¯¥è¢«è°ƒç”¨
  expect(mockOnSubmit).not.toHaveBeenCalled()
  ```

**æœ€ç»ˆç»“æ?*ï¼?/7æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼?
### é˜¶æ®µ3ï¼šPlaywrighté…ç½®ï¼?1:00-21:30ï¼?
#### æ–‡æ¡£æ•´åˆ
- **ç”¨æˆ·åé¦ˆ**ï¼?è¿™äº›æ–‡ä»¶ä¸èƒ½é›†æˆåˆ°tests/README.mdå—ï¼Ÿ"
- **å®ç°**ï¼?  - åˆ é™¤`vitest_examples/README.md`
  - åˆ é™¤`playwright_examples/README.md`
  - æ•´åˆåˆ°ä¸»`tests/README.md`ï¼?50+è¡ŒVitest + 200+è¡ŒPlaywrightï¼?
#### æµè§ˆå™¨å®‰è£?- **é”™è¯¯**ï¼šæµè§ˆå™¨æœªå®‰è£?- **è§£å†³**ï¼š`npx playwright install`
  - Chromium 91 MB
  - Firefox 105 MB
  - WebKit 57.6 MB
  - æ€»è€—æ—¶ï¼šçº¦1åˆ†é’Ÿ

#### åŸºç¡€æµ‹è¯•åˆ›å»º
- åˆ›å»º`basic.spec.ts`ï¼ˆä¸éœ€è¦åç«¯æ•°æ®ï¼‰
- é‡å‘½å`users.spec.ts`ä¸º`.example.ts`
- ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæç¤?
---

## ğŸ“Š æœ€ç»ˆæˆæ?
### Vitestæµ‹è¯•æ¡†æ¶
```
âœ?é…ç½®æ–‡ä»¶ï¼štests/vitest.config.ts
âœ?æµ‹è¯•æ–‡ä»¶ï¼štests/vitest_examples/UserForm.test.tsx
âœ?æµ‹è¯•ç»“æœï¼?/7 é€šè¿‡ (100%)
âœ?è¿è¡Œæ—¶é—´ï¼?.67ç§?```

**é€šè¿‡çš„æµ‹è¯?*ï¼?1. âœ?åº”è¯¥æ¸²æŸ“æ‰€æœ‰è¡¨å•å­—æ®?2. âœ?åº”è¯¥éªŒè¯å¿…å¡«å­—æ®µ-é˜»æ­¢ç©ºç”¨æˆ·åæäº¤
3. âœ?åº”è¯¥éªŒè¯é‚®ç®±æ ¼å¼-é˜»æ­¢æ— æ•ˆé‚®ç®±æäº¤
4. âœ?æˆåŠŸæäº¤æ—¶åº”è¯¥è°ƒç”¨onSubmitå›è°ƒ
5. âœ?åº”è¯¥åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹æ˜¾ç¤ºåˆå§‹å€?6. âœ?ç‚¹å‡»å–æ¶ˆæŒ‰é’®åº”è¯¥è°ƒç”¨onCancel
7. âœ?åº”è¯¥éªŒè¯ç”¨æˆ·åæœ€å°é•¿åº?
### Playwrightæµ‹è¯•æ¡†æ¶
```
âœ?é…ç½®æ–‡ä»¶ï¼štests/playwright.config.ts
âœ?æµè§ˆå™¨å®‰è£…ï¼šChromium, Firefox, WebKit
âœ?åŸºç¡€æµ‹è¯•ï¼štests/playwright_examples/basic.spec.ts
âœ?å®Œæ•´ç¤ºä¾‹ï¼štests/playwright_examples/users.spec.example.ts
```

### ç»Ÿä¸€é›†æˆ
```
âœ?Pythonè„šæœ¬ï¼špython tests\full_system_test.py --vitest/--playwright
âœ?æ‰¹å¤„ç†æ–‡ä»¶ï¼šè¿è¡Œvitestæµ‹è¯•.bat, è¿è¡Œplaywrightæµ‹è¯•.bat
âœ?æ–‡æ¡£æ•´åˆï¼štests/README.mdï¼ˆåŒ…å«å®Œæ•´ä½¿ç”¨æŒ‡å—ï¼‰
```

---

## ğŸ”§ è§£å†³çš„æŠ€æœ¯é—®é¢?
### 1. é…ç½®ä½ç½®é—®é¢˜
- â?ä¹‹å‰ï¼šé…ç½®åˆ†æ•£åœ¨frontend/å’Œé¡¹ç›®æ ¹ç›®å½•
- âœ?ç°åœ¨ï¼šæ‰€æœ‰é…ç½®åœ¨tests/ç›®å½•

### 2. ä¾èµ–å®‰è£…æ…?- â?ä¹‹å‰ï¼šå‡ åˆ†é’Ÿ
- âœ?ç°åœ¨ï¼?9ç§’ï¼ˆæ·˜å®é•œåƒï¼?
### 3. Reacté‡å¤å®ä¾‹
- â?ä¹‹å‰ï¼š`Invalid hook call`
- âœ?ç°åœ¨ï¼šdedupeé…ç½®è§£å†³

### 4. æµ‹è¯•å®æ—¶è¾“å‡º
- â?ä¹‹å‰ï¼šwatchæ¨¡å¼å¡ä½
- âœ?ç°åœ¨ï¼š`--run`å‚æ•°æ­£å¸¸é€€å‡?
### 5. è·¯å¾„åˆ«å
- â?ä¹‹å‰ï¼š`import UserForm from '../UserForm'`
- âœ?ç°åœ¨ï¼š`import UserForm from '@components/forms/UserForm'`

### 6. æµ‹è¯•éªŒè¯é€»è¾‘
- â?ä¹‹å‰ï¼šç­‰å¾…é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºï¼ˆè¶…æ—¶ï¼?- âœ?ç°åœ¨ï¼šéªŒè¯æäº¤è¢«é˜»æ­¢ï¼ˆæ›´å¯é ï¼?
---

## ğŸ“ åˆ›å»ºçš„æ–‡ä»?
### é…ç½®æ–‡ä»¶
1. `tests/vitest.config.ts` - Vitesté…ç½®
2. `tests/playwright.config.ts` - Playwrighté…ç½®
3. `tests/package.json` - ä¾èµ–ç®¡ç†
4. `tests/vitest_examples/setup.ts` - æµ‹è¯•ç¯å¢ƒ

### æµ‹è¯•æ–‡ä»¶
5. `tests/vitest_examples/UserForm.test.tsx` - 7ä¸ªæµ‹è¯?6. `tests/playwright_examples/basic.spec.ts` - åŸºç¡€E2Eæµ‹è¯•
7. `tests/playwright_examples/users.spec.example.ts` - CRUDç¤ºä¾‹

### å·¥å…·æ–‡ä»¶
8. `tests/è¿è¡Œvitestæµ‹è¯•.bat` - å¿«æ·å¯åŠ¨
9. `tests/è¿è¡Œplaywrightæµ‹è¯•.bat` - å¿«æ·å¯åŠ¨
10. `tests/æµ‹è¯•æ¡†æ¶é›†æˆå®Œæˆæ€»ç»“.md` - å®ŒæˆæŠ¥å‘Š

### æ–‡æ¡£æ›´æ–°
11. `tests/README.md` - æ•´åˆäº†å®Œæ•´æ–‡æ¡£ï¼ˆåˆ é™¤äº†å†—ä½™READMEï¼?12. `tests/full_system_test.py` - æ·»åŠ `--vitest`å’Œ`--playwright`å‚æ•°

---

## ğŸ’» ä»£ç ç»Ÿè®¡

### æ–°å¢ä»£ç 
- Vitestæµ‹è¯•ï¼š~150è¡?- Playwrightæµ‹è¯•ï¼š~100è¡?- é…ç½®æ–‡ä»¶ï¼š~200è¡?- æ–‡æ¡£æ›´æ–°ï¼š~500è¡?- **æ€»è®¡**ï¼š~950è¡?
### å®‰è£…çš„ä¾èµ?- Vitestç›¸å…³ï¼?ä¸ªåŒ…
- Playwrightç›¸å…³ï¼?ä¸ªåŒ…
- Reactæµ‹è¯•åº“ï¼š4ä¸ªåŒ…
- æµè§ˆå™¨ï¼š3ä¸ªï¼ˆChromium, Firefox, WebKitï¼?- **æ€»è®¡**ï¼?55ä¸ªnpmåŒ?
---

## ğŸ¯ å…³é”®æŠ€æœ¯ç‚¹

### 1. é›¶æ±¡æŸ“è®¾è®?```
tests/
â”œâ”€â”€ vitest.config.ts          â†?é…ç½®åœ¨è¿™é‡?â”œâ”€â”€ playwright.config.ts      â†?é…ç½®åœ¨è¿™é‡?â”œâ”€â”€ package.json              â†?ç‹¬ç«‹ä¾èµ–
â””â”€â”€ node_modules/             â†?éš”ç¦»çš„ä¾èµ?```

### 2. è·¯å¾„åˆ«åé…ç½®
```typescript
alias: {
  '@': path.resolve(__dirname, '../frontend/src'),
  '@components': path.resolve(__dirname, '../frontend/src/components'),
  '@pages': path.resolve(__dirname, '../frontend/src/pages'),
  '@services': path.resolve(__dirname, '../frontend/src/services'),
}
```

### 3. React dedupe
```typescript
resolve: {
  alias: {
    'react': path.resolve(__dirname, './node_modules/react'),
    'react-dom': path.resolve(__dirname, './node_modules/react-dom'),
  },
  dedupe: ['react', 'react-dom'],
}
```

### 4. æ·˜å®é•œåƒ
```bash
npm config set registry https://registry.npmmirror.com
```

---

## ğŸ“ ç”¨æˆ·åé¦ˆ

1. âœ?"ä¸ºä»€ä¹ˆä¸é…ç½®å¥½å‘¢ï¼? â†?å·²é…ç½®å¥½
2. âœ?"ä¾èµ–å®‰è£…å¤ªæ…¢" â†?ä½¿ç”¨æ·˜å®é•œåƒï¼?9ç§’å®Œæˆ?3. âœ?"çœ‹ä¸åˆ°è¿‡ç¨? â†?ä¿®å¤watchæ¨¡å¼é—®é¢˜
4. âœ?"è¿™äº›æ–‡ä»¶ä¸èƒ½é›†æˆåˆ°READMEå—ï¼Ÿ" â†?å·²æ•´å?5. âœ?"ä½ è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æµ‹è¯•" â†?å·²æ ¹æ®å®é™…ç»„ä»¶é‡å†?6. âœ?"ä¸è¦è·³è¿‡æµ‹è¯•ï¼Œä¿®å¤å®ƒ" â†?7/7å…¨éƒ¨é€šè¿‡
7. âœ?"æœ‰é”™è¯¯ï¼Œä¿®å¤å®? â†?å·²ä¿®å¤æ‰€æœ‰é”™è¯?
---

## ğŸš€ ä¸‹æ¬¡ç»§ç»­çš„è¦ç‚?
### å¯ä»¥ç«‹å³ä½¿ç”¨
```bash
# Vitest
python tests\full_system_test.py --vitest

# Playwrightï¼ˆéœ€å…ˆå¯åŠ¨å‰ç«¯ï¼‰
cd frontend && npm run dev
cd tests && npx playwright test
```

### å¯ä»¥æ‰©å±•
1. ä¸ºæ›´å¤šç»„ä»¶æ·»åŠ Vitestæµ‹è¯•
2. ç¼–å†™æ›´å¤šPlaywright E2Eåœºæ™¯
3. é›†æˆåˆ°CI/CDæµç¨‹
4. å¢åŠ æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘?
---

## ğŸŠ æ€»ç»“

**ä»Šå¤©å®Œæˆäº†Vitestå’ŒPlaywrightæµ‹è¯•æ¡†æ¶çš„å®Œæ•´é›†æˆï¼**

- âœ?Vitestï¼?/7æµ‹è¯•é€šè¿‡ï¼?00%æˆåŠŸç?- âœ?Playwrightï¼šé…ç½®å®Œæˆï¼Œæµè§ˆå™¨å·²å®‰è£…
- âœ?é›¶æ±¡æŸ“ï¼šæ‰€æœ‰é…ç½®åœ¨tests/ç›®å½•
- âœ?æ–‡æ¡£å®Œå–„ï¼šæ•´åˆåˆ°ä¸€ä¸ªREADME
- âœ?ç»Ÿä¸€å…¥å£ï¼šPythonè„šæœ¬å’Œæ‰¹å¤„ç†æ–‡ä»¶

**æµ‹è¯•æ¡†æ¶å·²ç»å®Œå…¨å°±ç»ªï¼Œå¯ä»¥å¼€å§‹TDDå¼€å‘äº†ï¼?* ğŸš€

---

## ğŸ“Œ é‡è¦æé†’

### Playwrightä½¿ç”¨å‰æ
âš ï¸ **å¿…é¡»å…ˆå¯åŠ¨å‰ç«¯æœåŠ?*ï¼?```bash
cd frontend
npm run dev
```

### npmé•œåƒé…ç½®
å·²é…ç½®æ·˜å®é•œåƒï¼š
```bash
npm config get registry
# https://registry.npmmirror.com
```

### æ–‡ä»¶ä½ç½®
- èŠå¤©è®°å½•ï¼š`é¡¹ç›®è®°å½•/èŠå¤©è®°å½•/2025-11-22_Vitestå’ŒPlaywrightæµ‹è¯•æ¡†æ¶é›†æˆ.md`
- å®Œæˆæ€»ç»“ï¼š`tests/æµ‹è¯•æ¡†æ¶é›†æˆå®Œæˆæ€»ç»“.md`
- ä½¿ç”¨æŒ‡å—ï¼š`tests/README.md`
