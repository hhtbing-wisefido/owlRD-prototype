# 项目根目录管理规范

**创建日期**: 2025-11-22  
**目的**: 保持项目根目录清洁，避免文件混乱  
**适用范围**: 整个项目的根目录

---

## 🎯 核心原则

### 根目录只放这些文件：
1. ✅ **必需配置文件**
   - `.gitignore` - Git忽略规则
   - `README.md` - 项目说明文档

2. ✅ **可选的顶层配置** (如果确实需要)
   - `.editorconfig` - 编辑器配置
   - `.prettierrc` - 代码格式化配置
   - `LICENSE` - 开源协议

### ❌ 根目录绝对不放：
1. ❌ **文档类文件**
   - 技术说明、操作指南、功能文档
   - 应该放在 `项目记录/` 或 `owlRD-prototype/docs/`

2. ❌ **临时文件**
   - TODO清单、工作笔记、草稿
   - 应该放在 `项目记录/6-过程记录/`

3. ❌ **脚本文件**
   - 启动脚本、工具脚本、测试脚本
   - 应该放在 `owlRD-prototype/backend/scripts/` 或 `owlRD-prototype/scripts/`

4. ❌ **数据文件**
   - JSON、CSV、临时数据
   - 应该放在 `owlRD-prototype/backend/app/data/`

5. ❌ **构建产物**
   - 编译文件、打包文件
   - 应该添加到 `.gitignore`

---

## 📂 正确的目录结构

### 根目录应该是这样：

```
项目根目录/
├── .gitignore           ← Git配置
├── README.md           ← 项目总览
├── owlRD-prototype/    ← 代码库目录
│   ├── backend/
│   ├── frontend/
│   ├── docs/          ← 技术文档
│   └── scripts/       ← 项目脚本
└── 项目记录/           ← 项目管理文档
    ├── README.md
    ├── 项目状态.json
    └── [各分类目录]/
```

### ❌ 错误示例

```
项目根目录/
├── .gitignore
├── README.md
├── 端口管理说明.md        ❌ 应该在 owlRD-prototype/
├── 项目整理TODO清单.md    ❌ 应该在 项目记录/6-过程记录/
├── 演示启动指南.md        ❌ 应该在 项目记录/4-部署运维/
├── COMMIT.bat            ❌ 临时脚本，应删除
├── 临时数据.json         ❌ 应该在 app/data/ 或删除
└── ...
```

---

## 🔍 文件归属判断流程

遇到文件不知道放哪里时，问这些问题：

### Q1: 这是配置文件吗？
- **是** → 是否为Git/编辑器等通用配置？
  - 是 → 可以放根目录
  - 否 → 放到具体项目目录（如 `owlRD-prototype/`）

### Q2: 这是文档吗？
- **是** → 是什么类型的文档？
  - 项目总览 → `README.md` (根目录)
  - 技术文档 → `owlRD-prototype/docs/`
  - 功能说明 → `项目记录/3-功能说明/`
  - 部署指南 → `项目记录/4-部署运维/`
  - 过程记录 → `项目记录/6-过程记录/`

### Q3: 这是脚本吗？
- **是** → 什么用途的脚本？
  - 后端工具 → `owlRD-prototype/backend/scripts/`
  - 前端工具 → `owlRD-prototype/frontend/scripts/`
  - 通用脚本 → `owlRD-prototype/scripts/`

### Q4: 这是临时文件吗？
- **是** → 直接删除或添加到 `.gitignore`

---

## ✅ 检查清单

### 创建新文件前
- [ ] 确定文件类型和用途
- [ ] 确定正确的存放位置
- [ ] 确认不应该在根目录
- [ ] 检查是否需要提交到Git

### 定期检查（每周）
- [ ] 查看根目录是否有新增文件
- [ ] 清理不该在根目录的文件
- [ ] 更新 `.gitignore` 排除临时文件
- [ ] 确保目录结构清晰

### 提交前检查
```bash
# 查看根目录文件
ls -la

# 应该只看到:
# .gitignore
# README.md
# owlRD-prototype/
# 项目记录/
```

---

## 🛠️ 自动化检查脚本

### PowerShell脚本

```powershell
# check-root-directory.ps1
# 检查项目根目录是否干净

$allowedFiles = @('.gitignore', 'README.md', '.editorconfig', 'LICENSE')
$rootFiles = Get-ChildItem -File | Where-Object { $_.Name -notin $allowedFiles }

if ($rootFiles.Count -gt 0) {
    Write-Host "❌ 根目录发现不应该存在的文件:" -ForegroundColor Red
    $rootFiles | ForEach-Object { 
        Write-Host "   - $($_.Name)" -ForegroundColor Yellow 
    }
    exit 1
} else {
    Write-Host "✅ 根目录清洁" -ForegroundColor Green
    exit 0
}
```

### 使用方法

```bash
# 手动检查
pwsh check-root-directory.ps1

# 集成到Git pre-commit hook
# .git/hooks/pre-commit
pwsh check-root-directory.ps1 || exit 1
```

---

## 📋 常见错误与修正

### 错误1: 把文档放在根目录
**错误**:
```
项目根目录/
├── 端口管理说明.md
```

**修正**:
```bash
# 移动到正确位置
Move-Item "端口管理说明.md" "owlRD-prototype/"
```

---

### 错误2: 临时文件堆积
**错误**:
```
项目根目录/
├── COMMIT.bat
├── test.json
├── 临时笔记.txt
```

**修正**:
```bash
# 删除临时文件
Remove-Item COMMIT.bat, test.json, 临时笔记.txt

# 添加到 .gitignore
echo "*.bat" >> .gitignore
echo "test*.json" >> .gitignore
echo "临时*.txt" >> .gitignore
```

---

### 错误3: 脚本文件混乱
**错误**:
```
项目根目录/
├── start.bat
├── deploy.sh
```

**修正**:
```bash
# 移动到scripts目录
Move-Item "start.bat" "owlRD-prototype/scripts/"
Move-Item "deploy.sh" "owlRD-prototype/scripts/"
```

---

## 🎯 最佳实践

### ✅ 应该做的
1. **保持简洁** - 根目录只有必需文件
2. **及时清理** - 发现多余文件立即处理
3. **规范命名** - 文件名清晰、有意义
4. **正确分类** - 文件放在正确的子目录
5. **定期检查** - 每周检查根目录状态

### ❌ 不应该做的
1. **随意创建** - 不在根目录随意创建文件
2. **临时堆放** - 不把根目录当临时存储
3. **忽略清理** - 不忽视多余文件
4. **混乱命名** - 不使用模糊的文件名
5. **缺少规划** - 不事先规划文件位置

---

## 📊 目录清洁度评估

### 优秀 (⭐⭐⭐⭐⭐)
```
项目根目录/
├── .gitignore
├── README.md
├── owlRD-prototype/
└── 项目记录/
```
- 只有必需文件
- 结构清晰明了
- 易于导航

### 良好 (⭐⭐⭐⭐)
```
项目根目录/
├── .gitignore
├── README.md
├── .editorconfig      ← 可接受的配置文件
├── owlRD-prototype/
└── 项目记录/
```
- 有少量合理的配置文件
- 结构基本清晰

### 需要改进 (⭐⭐)
```
项目根目录/
├── .gitignore
├── README.md
├── 说明文档.md        ← 应该移走
├── 启动脚本.bat       ← 应该移走
├── owlRD-prototype/
└── 项目记录/
```
- 有不该在根目录的文件
- 需要立即整理

### 混乱 (⭐)
```
项目根目录/
├── .gitignore
├── README.md
├── 文档1.md
├── 文档2.md
├── script.bat
├── data.json
├── temp.txt
├── ...（更多文件）
```
- 文件混乱
- 需要彻底清理

---

## 🔄 整理流程

### 发现根目录有多余文件时

1. **识别文件类型**
   ```bash
   # 列出所有文件
   Get-ChildItem -File
   ```

2. **逐个处理**
   - 配置文件 → 判断是否必需
   - 文档文件 → 移动到项目记录或docs
   - 脚本文件 → 移动到scripts
   - 临时文件 → 删除或添加到.gitignore
   - 数据文件 → 移动到data目录

3. **提交更改**
   ```bash
   git add -A
   git commit -m "cleanup: 清理项目根目录"
   git push
   ```

4. **更新规范**（如发现新问题）
   - 记录问题和解决方案
   - 更新本规范文档
   - 分享给团队

---

## 📝 维护记录

### 清理历史
| 日期 | 清理内容 | 说明 |
|------|---------|------|
| 2025-11-22 | 端口管理说明.md | 移动到owlRD-prototype/ |
| 2025-11-22 | 项目整理TODO清单.md | 移动到项目记录/6-过程记录/ |
| 2025-11-22 | 演示启动指南.md | 删除空文件 |

### 规范更新
| 日期 | 版本 | 更新内容 |
|------|------|---------|
| 2025-11-22 | 1.0 | 初始版本，定义根目录管理规范 |

---

## 💡 团队约定

### 新成员培训
- 阅读本规范
- 了解目录结构
- 学会文件分类
- 养成良好习惯

### 代码审查重点
- 检查根目录是否干净
- 确认文件位置正确
- 提醒规范要求

### 持续改进
- 收集反馈意见
- 优化规范内容
- 更新自动化工具

---

**维护者**: 项目团队  
**最后更新**: 2025-11-22  
**版本**: 1.0  
**状态**: ✅ 生效中

---

**说明**: 
- 本规范为强制性规范，所有团队成员必须遵守
- 违反规范会导致代码审查不通过
- 定期检查根目录清洁度是项目维护的一部分
