# 后端服务启动方式说明

**目的**: 明确推荐的后端启动方式，避免端口冲突问题  
**最后更?*: 2025-11-22  

---

## 🎯 推荐启动方式（固定）

### ?方法1: 使用 `start_with_check.py`（强烈推荐）

```bash
cd owlRD-prototype/backend
python start_with_check.py
```

**为什么这是最佳方?*:
- ?**自动端口检?* - 检?000端口是否被占?- ?**智能进程清理** - 发现占用时，提供交互式清理选项
- ?**避免冲突错误** - 确保服务能够正常启动
- ?**友好提示** - 清晰的启动状态和访问地址提示
- ?**自动配置** - 已设?`host=0.0.0.0` 支持局域网访问

**脚本功能**:
1. 检查端?000是否被占?2. 如果被占用，显示占用进程信息（PID和进程名?3. 询问是否终止占用进程
4. 用户确认后，清理进程并启动服?5. 启动uvicorn服务?
**端口冲突场景**:
```
⚠️  端口 8000 被以下进程占?
  - PID: 12345 | 进程: python.exe

是否终止这些进程以启动新的服? (Y/N): Y
?所有占用进程已清理
?端口 8000 可用，启动服?..
```

---

### 方法2: 手动uvicorn启动（不推荐?
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

**问题**:
- ?不检查端口是否被占用
- ?如果端口被占用会直接报错退?- ?需要手动查找并终止占用进程
- ?操作繁琐，容易出?
**仅在以下情况使用**:
- 你已经确认端?000未被占用
- 你需要自定义启动参数
- 在生产环境使用专门的进程管理工具

---

### 方法3: Python模块启动（不推荐?
```bash
python -m app.main
```

**问题**:
- ?不检查端口冲?- ?默认只监听localhost，不支持局域网访问
- ?没有热重载功?
---

## 🚀 前端启动方式（固定）

### ?标准方式

```bash
cd owlRD-prototype/frontend
npm run dev
```

**为什么这是最佳方?*:
- ?已在 `package.json` 中配?`--host`
- ?自动支持本机和局域网访问
- ?热模块替换（HMR）功?- ?标准的Vite开发服务器

**package.json配置**:
```json
{
  "scripts": {
    "dev": "vite --host"
  }
}
```

---

## 🔧 端口管理

### 固定端口分配
| 服务 | 端口 | 说明 |
|------|------|------|
| 后端API | 8000 | 不可更改，前端配置依赖此端口 |
| 前端开发服务器 | 3000 | Vite默认端口 |

### 为什么端口不能随意更?1. **前端配置依赖** - 前端?`vite.config.ts` 中配置了后端代理?000端口
2. **API文档地址** - 所有文档都使用8000端口
3. **CORS配置** - 后端CORS白名单包含固定的端口组合
4. **部署脚本** - 自动化脚本依赖固定端?
---

## 📝 常见问题

### Q1: 端口8000被占用怎么办？
**A**: 使用推荐?`python start_with_check.py` 启动，脚本会自动处理?
### Q2: 如果必须手动清理端口怎么办？
**A**: 
```bash
# Windows
netstat -ano | findstr :8000
taskkill /PID <进程ID> /F

# Linux/Mac
lsof -i :8000
kill -9 <进程ID>
```

### Q3: 前端无法连接后端怎么办？
**A**: 确保?1. 后端已启动在8000端口
2. 使用推荐的启动方?3. 检查防火墙设置

### Q4: 为什么不使用Docker?**A**: 
- 当前是开发阶段，直接运行更方便调?- 未来可以考虑Docker部署
- 但开发时仍建议使?`start_with_check.py`

---

## ?最佳实?
### 每次开发时
1. **启动后端**:
   ```bash
   cd owlRD-prototype/backend
   python start_with_check.py
   ```

2. **启动前端** (新终?:
   ```bash
   cd owlRD-prototype/frontend
   npm run dev
   ```

3. **访问应用**:
   - 前端: http://localhost:3000
   - API文档: http://localhost:8000/docs-local

### 停止服务
- ?`Ctrl+C` 停止各自的服?- 或直接关闭终端窗?
---

## 📚 相关文档

- [主README - 快速开始](../../README.md#快速开?
- [后端README](./README.md)
- [局域网访问指南](../../项目记录/4-部署运维/局域网访问指南.md)
- [端口管理说明](../端口管理说明.md)

---

**维护?*: 项目团队  
**最后更?*: 2025-11-22  
**状?*: ?已验?