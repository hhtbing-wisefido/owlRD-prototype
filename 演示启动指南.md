# owlRD系统演示启动指南

**⏱️ 预计时间**: 5分钟完成启动  
**🎯 目标**: 快速启动系统进行功能演示

---

## ✅ 演示前检查清单

### 系统要求
- [ ] Python 3.11+ 已安装
- [ ] Node.js 18+ 已安装
- [ ] Git已安装
- [ ] 端口8000和3000未被占用

### 项目准备
- [ ] 项目已clone到本地
- [ ] 进入项目目录: `d:\test_Project\owlRD-原型项目`

---

## 🚀 快速启动步骤

### 第1步: 启动后端 (2分钟)

```bash
# 打开终端1
cd d:\test_Project\owlRD-原型项目\owlRD-prototype\backend

# 激活虚拟环境（如果有）
# Windows:
.venv\Scripts\activate

# 启动后端服务
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**期望输出**:
```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

**验证**:
- 浏览器访问: http://localhost:8000/docs
- 应该看到Swagger API文档页面

---

### 第2步: 初始化示例数据 (1分钟)

```bash
# 打开终端2 (保持终端1后端运行)
cd d:\test_Project\owlRD-原型项目\owlRD-prototype\backend

# 运行示例数据初始化
python init_sample_data.py
```

**期望输出**:
```
🏢 Creating sample tenant...
✅ Created tenant: 示例养老院
👤 Creating sample users...
✅ Created 2 users
🏠 Creating sample locations...
✅ Created locations and rooms
...
✅ 示例数据初始化完成！
```

**验证**:
- 检查 `backend/app/data/` 目录下有 `.json` 文件
- 文件应该有内容（不是空的）

---

### 第3步: 启动前端 (2分钟)

```bash
# 打开终端3
cd d:\test_Project\owlRD-原型项目\owlRD-prototype\frontend

# 安装依赖（首次运行）
npm install

# 启动前端开发服务器
npm run dev
```

**期望输出**:
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.2.6:3000/
  ➜  press h + enter to show help
```

**验证**:
- 浏览器访问: http://localhost:3000
- 应该看到系统Dashboard页面

---

## ✅ 启动成功验证

### 1. 后端验证

访问 http://localhost:8000/docs

**检查项**:
- [ ] 页面正常加载
- [ ] 看到API列表
- [ ] 可以展开API查看详情

**测试一个API**:
```bash
# 获取住户列表
curl "http://localhost:8000/api/v1/residents?tenant_id=10000000-0000-0000-0000-000000000001"
```

应该返回JSON数据。

---

### 2. 前端验证

访问 http://localhost:3000

**检查项**:
- [ ] Dashboard页面加载
- [ ] 看到统计卡片（住户数、设备数等）
- [ ] 图表显示数据
- [ ] 左侧导航栏可点击

**测试导航**:
- [ ] 点击 "住户管理" → 看到住户列表
- [ ] 点击 "设备管理" → 看到设备列表  
- [ ] 点击 "告警中心" → 看到告警列表
- [ ] 点击 "护理质量" → 看到质量报告

---

### 3. WebSocket验证

**在前端页面**:
1. 打开浏览器开发者工具 (F12)
2. 切换到 "Network" 标签
3. 筛选 "WS" (WebSocket)
4. 刷新页面

**检查**:
- [ ] 看到WebSocket连接
- [ ] 状态显示 "101 Switching Protocols"
- [ ] Messages标签下有消息

---

## 🎬 开始演示

### 演示准备

1. **打开浏览器**:
   - 主窗口: http://localhost:3000 (演示用)
   - 第二窗口: http://localhost:8000/docs (技术演示用)

2. **清除缓存**:
   - 按 Ctrl+F5 强制刷新

3. **调整窗口**:
   - 全屏或适当大小
   - 确保字体清晰可读

4. **准备演示脚本**:
   - 打开 `项目记录/演示脚本.md`
   - 按脚本进行演示

### 演示流程

📖 **参考**: `项目记录/演示脚本.md`

**简要流程**:
1. Dashboard总览 (2分钟)
2. 住户管理 (1分钟)
3. 设备管理 (1分钟)
4. 告警系统 (2分钟)
5. 护理质量 (2分钟)
6. 技术总结 (2分钟)

---

## ⚠️ 常见问题

### 问题1: 后端启动失败

**症状**: `ModuleNotFoundError` 或依赖错误

**解决**:
```bash
# 安装依赖
pip install -r requirements.txt

# 或单独安装
pip install fastapi uvicorn pydantic websockets
```

---

### 问题2: 前端启动失败

**症状**: `Cannot find module` 或依赖错误

**解决**:
```bash
# 删除node_modules重新安装
rm -rf node_modules package-lock.json
npm install
```

---

### 问题3: 没有数据显示

**症状**: 页面加载但显示"暂无数据"

**解决**:
```bash
# 重新初始化数据
cd backend
python init_sample_data.py
```

---

### 问题4: WebSocket连接失败

**症状**: 实时数据不更新

**检查**:
1. 后端是否正常运行
2. 浏览器控制台是否有错误
3. 网络防火墙是否阻止WebSocket

**解决**:
- 重启后端服务
- 清除浏览器缓存

---

### 问题5: 端口被占用

**症状**: `Address already in use` 错误

**解决**:
```bash
# Windows - 查找占用端口的进程
netstat -ano | findstr :8000
netstat -ano | findstr :3000

# 结束进程
taskkill /PID <进程ID> /F

# 或使用其他端口
# 后端
python -m uvicorn app.main:app --reload --port 8001

# 前端 - 修改vite.config.ts中的端口
```

---

## 🛑 停止服务

### 正常停止

**后端**:
```
在后端终端按 Ctrl+C
```

**前端**:
```
在前端终端按 Ctrl+C
```

### 强制停止

```bash
# Windows
taskkill /F /IM python.exe
taskkill /F /IM node.exe

# 或在任务管理器中结束进程
```

---

## 📊 演示数据说明

### 当前示例数据

**租户**: 1个
- 示例养老院

**用户**: 2个
- admin_user (管理员)
- nurse_user (护士)

**住户**: 2个  
- 使用匿名代称
- 绑定到不同床位

**设备**: 2个
- 雷达设备
- 压力板设备

**IoT数据**: 约100+条
- 过去24小时的数据
- 包含心率、呼吸率、姿态等

**告警**: 若干条
- 不同级别的告警
- 不同类型（跌倒、生命体征等）

---

## 🎯 快速测试命令

### 测试API端点

```bash
# 获取租户列表
curl http://localhost:8000/api/v1/tenants

# 获取住户列表  
curl "http://localhost:8000/api/v1/residents?tenant_id=10000000-0000-0000-0000-000000000001"

# 获取设备列表
curl "http://localhost:8000/api/v1/devices?tenant_id=10000000-0000-0000-0000-000000000001"

# 获取告警列表
curl "http://localhost:8000/api/v1/alerts?tenant_id=10000000-0000-0000-0000-000000000001"
```

---

## 📝 演示后清理（可选）

### 重置演示数据

```bash
cd backend

# 删除现有数据
Remove-Item app/data/*.json -Force

# 重新初始化
python init_sample_data.py
```

### 完全清理

```bash
# 停止所有服务
# 删除数据文件
# 删除日志文件（如有）
```

---

## ✅ 准备完成检查

演示前最后确认:

- [ ] 后端运行在 http://localhost:8000
- [ ] 前端运行在 http://localhost:3000
- [ ] API文档可访问
- [ ] Dashboard显示数据
- [ ] 所有页面可正常访问
- [ ] WebSocket连接正常
- [ ] 演示脚本已准备
- [ ] 浏览器窗口已调整

**✅ 一切就绪，开始演示！**

---

**文档版本**: 1.0  
**最后更新**: 2025-11-20  
**适用于**: owlRD原型系统演示
